<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>Implementing a sorted set by ordered array</title>
<meta charset=utf-8><meta content="Web ,Java ,Go ,Node.js ,PHP ,Koa ,MySQL ,Redis ,front-end ,back-end ,database" name=keywords><meta name=description content="
A <code>Set</code> that further provides a total ordering on its elements. The elements are ordered using their natural ordering, or by a <code>Comparator</code> typically provided at sorted set creation time. The set&rsquo;s iterator will traverse the set in ascending element order. Several additional operations are provided to take advantage of the ordering. (This interface is the set analogue of <code>SortedMap</code>.)
Oracle - SortedSet

Java provides a built-in SortedSet implementation, known as TreeSet. In this article, I&rsquo;ll show how to implement a SortedSet by Ordered Array."><meta name=author content="Lei Xia"><link rel=canonical href=https://www.ddhigh.com/en/2023/05/06/implement-a-sorted-set-by-array/><link rel=alternate type=application/rss+xml href=https://www.ddhigh.com//index.xml title=每天进步一点点><script async defer data-website-id=52f8f0f9-d93d-466b-8ef5-508aae8c4ed4 src=https://analysis.ddhigh.com/script.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EC3XLVSGKV"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EC3XLVSGKV")</script><meta property="og:title" content="Implementing a sorted set by ordered array"><meta property="og:description" content="
A <code>Set</code> that further provides a total ordering on its elements. The elements are ordered using their natural ordering, or by a <code>Comparator</code> typically provided at sorted set creation time. The set&rsquo;s iterator will traverse the set in ascending element order. Several additional operations are provided to take advantage of the ordering. (This interface is the set analogue of <code>SortedMap</code>.)
Oracle - SortedSet

Java provides a built-in SortedSet implementation, known as TreeSet. In this article, I&rsquo;ll show how to implement a SortedSet by Ordered Array."><meta property="og:type" content="article"><meta property="og:url" content="https://www.ddhigh.com/en/2023/05/06/implement-a-sorted-set-by-array/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-06T15:41:52+00:00"><meta property="article:modified_time" content="2023-05-06T15:41:52+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Implementing a sorted set by ordered array"><meta name=twitter:description content="
A <code>Set</code> that further provides a total ordering on its elements. The elements are ordered using their natural ordering, or by a <code>Comparator</code> typically provided at sorted set creation time. The set&rsquo;s iterator will traverse the set in ascending element order. Several additional operations are provided to take advantage of the ordering. (This interface is the set analogue of <code>SortedMap</code>.)
Oracle - SortedSet

Java provides a built-in SortedSet implementation, known as TreeSet. In this article, I&rsquo;ll show how to implement a SortedSet by Ordered Array."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.ddhigh.com/en/posts/"},{"@type":"ListItem","position":2,"name":"Implementing a sorted set by ordered array","item":"https://www.ddhigh.com/en/2023/05/06/implement-a-sorted-set-by-array/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Implementing a sorted set by ordered array","name":"Implementing a sorted set by ordered array","description":" A \u0026lt;code\u0026gt;Set\u0026lt;/code\u0026gt; that further provides a total ordering on its elements. The elements are ordered using their natural ordering, or by a \u0026lt;code\u0026gt;Comparator\u0026lt;/code\u0026gt; typically provided at sorted set creation time. The set\u0026rsquo;s iterator will traverse the set in ascending element order. Several additional operations are provided to take advantage of the ordering. (This interface is the set analogue of \u0026lt;code\u0026gt;SortedMap\u0026lt;/code\u0026gt;.)\nOracle - SortedSet\nJava provides a built-in SortedSet implementation, known as TreeSet. In this article, I\u0026rsquo;ll show how to implement a SortedSet by Ordered Array.\n","keywords":[],"articleBody":" A Set that further provides a total ordering on its elements. The elements are ordered using their natural ordering, or by a Comparator typically provided at sorted set creation time. The set’s iterator will traverse the set in ascending element order. Several additional operations are provided to take advantage of the ordering. (This interface is the set analogue of SortedMap.)\nOracle - SortedSet\nJava provides a built-in SortedSet implementation, known as TreeSet. In this article, I’ll show how to implement a SortedSet by Ordered Array.\nPrerequisite To implement a SortSet, you need to know about the following concepts and algorithms.\nBinary Search Algorithm In computer science, binary search, also known as half-interval search,[1] logarithmic search,[2] or binary chop,[3] is a search algorithm that finds the position of a target value within a sorted array.[4][5] Binary search compares the target value to the middle element of the array. If they are not equal, the half in which the target cannot lie is eliminated and the search continues on the remaining half, again taking the middle element to compare to the target value, and repeating this until the target value is found. If the search ends with the remaining half being empty, the target is not in the array.\nWikipedia - Binary search algorithm\nBinary Search can also search for ceil and floor key to a specific key.\nIn my implementation, I use Binary Search to find a specific key or the first key greater than the specific key.\nAutomatic expansion algorithm In Java,Array can’t be automatically expanded, so we need to expand manually, a simple way is to double the array size and copy the element to the new array.\nHere is an example.\n// Automatic expansion private void ensureCapacity(int newCapacity) { // keys is enough for newCapacity if (newCapacity \u003c keys.length) { return; } // increase by double var newKeys = (K[]) Array.newInstance(Comparable.class, keys.length * 2); var newValues = (V[]) Array.newInstance(Comparable.class, values.length * 2); for (int i = 0; i \u003c keys.length; i++) { if (keys[i] != null) { newKeys[i] = keys[i]; newValues[i] = values[i]; } } keys = newKeys; values = newValues; } Implementation How to find ceil/floor key? Well, for examle, there is a sorted array.\n[1,2,3,4,7,8] If we want to find $ceil(5)$, what’s the step? Here is the binary search procedure.\nStep 1 $$ left = 0, right = 5, middle = (0+5)/2=2, nums[middle] = 3, \\because 3 \u003c 5, \\therefore left = middle + 1 = 4 $$ Step 2 $$ left = 4, right = 5, middle = (4+5)/2=4, nums[middle] = 7, \\because 7 \u003e 5, \\therefore right = middle-1=3 $$ Step3 $$ left=4,right=3, exit loop $$ so finally $ceil(5) = 7$.\nCode First, we need to declare a interface, so if we have some new implementations, we can easily expand our algorithm.\nimport java.lang.reflect.Array; // A simple SortSet implementation by Array public interface SortSet\u003cK extends Comparable\u003cK\u003e, V\u003e { // Retrieve for the value of specific key V get(K key); // Put a new value void put(K key, V value); // Remove a specific key void remove(K key); // Retrieve the first key greater than the specific key K ceil(K key); // Get the rank of the specific key int rank(K key); // Retrieve the last key less than the specific key K floor(K key); // Check whether the key is exists boolean containsKey(K key); class ArraySortedSet\u003cK extends Comparable\u003cK\u003e, V\u003e implements SortSet\u003cK, V\u003e { private K[] keys; private V[] values; private int size; public ArraySortedSet(int capacity) { keys = (K[]) Array.newInstance(Comparable.class, capacity); values = (V[]) Array.newInstance(Object.class, capacity); } public ArraySortedSet() { this(8); } @Override public V get(K key) { var rank = rank(key); if (rank \u003c size \u0026\u0026 keys[rank].compareTo(key) == 0) { return values[rank]; } return null; } @Override public void put(K key, V value) { var rank = rank(key); if (rank \u003c size \u0026\u0026 keys[rank].compareTo(key) == 0) { values[rank] = value; return; } ensureCapacity(size + 1); for (int j = size; j \u003e rank; j--) { // move the prev element forward to make an empty to save new element keys[j] = keys[j - 1]; values[j] = values[j - 1]; } keys[rank] = key; values[rank] = value; size++; } // Automatic expansion private void ensureCapacity(int newCapacity) { // keys is enough for newCapacity if (newCapacity \u003c keys.length) { return; } // increase by double var newKeys = (K[]) Array.newInstance(Comparable.class, keys.length * 2); var newValues = (V[]) Array.newInstance(Comparable.class, values.length * 2); for (int i = 0; i \u003c keys.length; i++) { if (keys[i] != null) { newKeys[i] = keys[i]; newValues[i] = values[i]; } } keys = newKeys; values = newValues; } @Override public void remove(K key) { var rank = rank(key); if (rank \u003c size \u0026\u0026 keys[rank].equals(key)) { // move the next element forward for (int i = rank + 1; i \u003c size; i++) { keys[i - 1] = keys[i]; values[i - 1] = values[i]; } size--; } } @Override public K ceil(K key) { var rank = rank(key); if (rank \u003c size \u0026\u0026 keys[rank].compareTo(key) == 0) { return keys[rank]; } return rank \u003e= size ? null : keys[rank]; } @Override public int rank(K key) { var start = 0; var end = size; while (start \u003c= end) { var middle = start + (end - start) / 2; if (keys[middle] == null) { end = middle - 1; continue; } var compare = key.compareTo(keys[middle]); if (compare == 0) { return middle; } if (compare \u003e 0) { start = middle + 1; } else { end = middle - 1; } } return start; } @Override public K floor(K key) { var left = 0; var right = size - 1; while (left \u003c= right) { var middle = left + (right - left) / 2; var compare = keys[middle].compareTo(key); if (compare == 0) { return keys[middle]; } else if (compare \u003e 0) { right = middle - 1; } else { left = middle + 1; } } // target is left than minimal value of keys if (right \u003c 0) { return null; } if (left \u003e= size) { // left is greater than the max keys return keys[size - 1]; } return keys[right]; } @Override public boolean containsKey(K key) { return get(key) != null; } @Override public String toString() { var sb = new StringBuilder(); for (var i = 0; i \u003c size; i++) { if (keys[i] != null) { sb.append(keys[i]).append('=').append(values[i]); if (i \u003c size - 1) { sb.append(','); } } } return sb.toString(); } } static void main(String[] args) { var set = new ArraySortedSet\u003cInteger, Integer\u003e(); set.put(2, 2); set.put(1, 1); set.put(3, 3); set.put(4, 4); set.put(5, 5); set.put(6, 6); set.put(7, 7); set.put(8, 8); set.put(9, 9); System.out.println(set); System.out.println(set.get(3)); System.out.println(set.get(-1)); System.out.println(set.get(2)); System.out.println(set.ceil(2)); System.out.println(set.ceil(-1)); set.put(0, 0); System.out.println(set.ceil(-1)); System.out.println(set); } } Reference Oracle - SortedSet Wikipedia - Binary search algorithm ","wordCount":"1126","inLanguage":"en","datePublished":"2023-05-06T15:41:52Z","dateModified":"2023-05-06T15:41:52Z","author":{"@type":"Person","name":"Lei Xia"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.ddhigh.com/en/2023/05/06/implement-a-sorted-set-by-array/"},"publisher":{"@type":"Organization","name":"每天进步一点点","logo":{"@type":"ImageObject","url":"https://www.ddhigh.com/favicon.ico"}}}</script><link rel=icon href=/img/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/img/favicon.ico><link rel=manifest href=/img/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.d0df733b91ef046970ecd63de7aa626886fd263fd3fb2b8ff28b560e505831f7.css integrity="sha256-0N9zO5HvBGlw7NY956piaIb9Jj/T+yuP8otWDlBYMfc=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css integrity="sha512-ygEyjMC6rqnzJqWGjRTJUPYMEs9JUOm3i7OWUS9CgQ4XkBUvMsgCS1I8JqavidQ2ClHcREB7IbA2mN08+r9Elg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>$darkModeInit.Content|safeJS</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/en>DayDayUP
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/en/>Home</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/en/archives>Archives</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/en/books>Books</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/en/guestbook>Guestbook</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/xialeistudio><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li><li class="navigation-item navigation-language"><a href=https://www.ddhigh.com/>中</a></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>Implementing a sorted set by ordered array</h1></header><p><small>May 6, 2023&nbsp;· 1126 words&nbsp;· 6 min</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#prerequisite>Prerequisite</a><ul><li><a href=#binary-search-algorithm>Binary Search Algorithm</a></li><li><a href=#automatic-expansion-algorithm>Automatic expansion algorithm</a></li></ul></li><li><a href=#implementation>Implementation</a><ul><li><a href=#how-to-find-ceilfloor-key>How to find ceil/floor key?</a></li><li><a href=#code>Code</a></li></ul></li><li><a href=#reference>Reference</a></li></ul></nav></div><section class=blog-content><blockquote><p>A <a href=https://docs.oracle.com/javase/8/docs/api/java/util/Set.html target=_blank rel=noopener>&lt;code>Set&lt;/code></a> that further provides a <em>total ordering</em> on its elements. The elements are ordered using their <a href=https://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html target=_blank rel=noopener>natural ordering</a>, or by a <a href=https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html target=_blank rel=noopener>&lt;code>Comparator&lt;/code></a> typically provided at sorted set creation time. The set&rsquo;s iterator will traverse the set in ascending element order. Several additional operations are provided to take advantage of the ordering. (This interface is the set analogue of <a href=https://docs.oracle.com/javase/8/docs/api/java/util/SortedMap.html target=_blank rel=noopener>&lt;code>SortedMap&lt;/code></a>.)</p><p><em><strong>Oracle</strong></em> - <a href=https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html target=_blank rel=noopener>SortedSet</a></p></blockquote><p>Java provides a built-in <code>SortedSet</code> implementation, known as <code>TreeSet</code>. In this article, I&rsquo;ll show how to implement a <code>SortedSet</code> by <code>Ordered Array</code>.</p><h2 id=prerequisite>Prerequisite</h2><p>To implement a <code>SortSet</code>, you need to know about the following concepts and algorithms.</p><h3 id=binary-search-algorithm>Binary Search Algorithm</h3><blockquote><p>In <a href=https://en.wikipedia.org/wiki/Computer_science target=_blank rel=noopener>computer science</a>, <strong>binary search</strong>, also known as <strong>half-interval search</strong>,[<a href=https://en.wikipedia.org/wiki/Binary_search_algorithm#cite_note-Williams1976-1 target=_blank rel=noopener>1]</a> <strong>logarithmic search</strong>,[<a href=https://en.wikipedia.org/wiki/Binary_search_algorithm#cite_note-FOOTNOTEKnuth1998%c2%a76.2.1_%28%22Searching_an_ordered_table%22%29,_subsection_%22Binary_search%22-2 target=_blank rel=noopener>2]</a> or <strong>binary chop</strong>,[<a href=https://en.wikipedia.org/wiki/Binary_search_algorithm#cite_note-FOOTNOTEButterfieldNgondi201646-3 target=_blank rel=noopener>3]</a> is a <a href=https://en.wikipedia.org/wiki/Search_algorithm target=_blank rel=noopener>search algorithm</a> that finds the position of a target value within a <a href=https://en.wikipedia.org/wiki/Sorted_array target=_blank rel=noopener>sorted array</a>.[<a href=https://en.wikipedia.org/wiki/Binary_search_algorithm#cite_note-FOOTNOTECormenLeisersonRivestStein200939-4 target=_blank rel=noopener>4]</a>[<a href=https://en.wikipedia.org/wiki/Binary_search_algorithm#cite_note-5 target=_blank rel=noopener>5]</a> Binary search compares the target value to the middle element of the array. If they are not equal, the half in which the target cannot lie is eliminated and the search continues on the remaining half, again taking the middle element to compare to the target value, and repeating this until the target value is found. If the search ends with the remaining half being empty, the target is not in the array.</p><p><em><strong>Wikipedia</strong></em> - <a href=https://en.wikipedia.org/wiki/Binary_search_algorithm target=_blank rel=noopener>Binary search algorithm</a></p></blockquote><p>Binary Search can also search for ceil and floor key to a specific key.</p><p>In my implementation, I use Binary Search to find a specific key or the first key greater than the specific key.</p><h3 id=automatic-expansion-algorithm>Automatic expansion algorithm</h3><p>In Java,<code>Array </code>can&rsquo;t be automatically expanded, so we need to expand manually, a simple way is to double the array size and copy the element to the new array.</p><p>Here is an example.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Automatic expansion</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>ensureCapacity</span>(<span style=color:#66d9ef>int</span> newCapacity) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// keys is enough for newCapacity</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (newCapacity <span style=color:#f92672>&lt;</span> keys.<span style=color:#a6e22e>length</span>) {
</span></span><span style=display:flex><span>  	<span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#75715e>// increase by double</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> newKeys <span style=color:#f92672>=</span> (K<span style=color:#f92672>[]</span>) Array.<span style=color:#a6e22e>newInstance</span>(Comparable.<span style=color:#a6e22e>class</span>, keys.<span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> 2);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> newValues <span style=color:#f92672>=</span> (V<span style=color:#f92672>[]</span>) Array.<span style=color:#a6e22e>newInstance</span>(Comparable.<span style=color:#a6e22e>class</span>, values.<span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> 2);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> keys.<span style=color:#a6e22e>length</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>  	<span style=color:#66d9ef>if</span> (keys<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>    	newKeys<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> keys<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    	newValues<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> values<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  keys <span style=color:#f92672>=</span> newKeys;
</span></span><span style=display:flex><span>  values <span style=color:#f92672>=</span> newValues;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=implementation>Implementation</h2><h3 id=how-to-find-ceilfloor-key>How to find ceil/floor key?</h3><p>Well, for examle, there is a sorted array.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>[</span>1,2,3,4,7,8<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>If we want to find $ceil(5)$, what&rsquo;s the step? Here is the binary search procedure.</p><p><strong>Step 1</strong>
$$
left = 0, right = 5, middle = (0+5)/2=2, nums[middle] = 3, \because 3 &lt; 5, \therefore left = middle + 1 = 4
$$
<strong>Step 2</strong>
$$
left = 4, right = 5, middle = (4+5)/2=4, nums[middle] = 7, \because 7 > 5, \therefore right = middle-1=3
$$
<strong>Step3</strong>
$$
left=4,right=3, exit loop
$$
so finally $ceil(5) = 7$.</p><h3 id=code>Code</h3><p>First, we need to declare a interface, so if we have some new implementations, we can easily expand our algorithm.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.Array;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// A simple SortSet implementation by Array</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>SortSet</span><span style=color:#f92672>&lt;</span>K <span style=color:#66d9ef>extends</span> Comparable<span style=color:#f92672>&lt;</span>K<span style=color:#f92672>&gt;</span>, V<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Retrieve for the value of specific key</span>
</span></span><span style=display:flex><span>    V <span style=color:#a6e22e>get</span>(K key);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Put a new value</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>put</span>(K key, V value);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Remove a specific key</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>remove</span>(K key);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Retrieve the first key greater than the specific key</span>
</span></span><span style=display:flex><span>    K <span style=color:#a6e22e>ceil</span>(K key);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Get the rank of the specific key</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>rank</span>(K key);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Retrieve the last key less than the specific key</span>
</span></span><span style=display:flex><span>    K <span style=color:#a6e22e>floor</span>(K key);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Check whether the key is exists</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>containsKey</span>(K key);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ArraySortedSet</span><span style=color:#f92672>&lt;</span>K <span style=color:#66d9ef>extends</span> Comparable<span style=color:#f92672>&lt;</span>K<span style=color:#f92672>&gt;</span>, V<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>implements</span> SortSet<span style=color:#f92672>&lt;</span>K, V<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> K<span style=color:#f92672>[]</span> keys;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> V<span style=color:#f92672>[]</span> values;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> size;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ArraySortedSet</span>(<span style=color:#66d9ef>int</span> capacity) {
</span></span><span style=display:flex><span>            keys <span style=color:#f92672>=</span> (K<span style=color:#f92672>[]</span>) Array.<span style=color:#a6e22e>newInstance</span>(Comparable.<span style=color:#a6e22e>class</span>, capacity);
</span></span><span style=display:flex><span>            values <span style=color:#f92672>=</span> (V<span style=color:#f92672>[]</span>) Array.<span style=color:#a6e22e>newInstance</span>(Object.<span style=color:#a6e22e>class</span>, capacity);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ArraySortedSet</span>() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>(8);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> V <span style=color:#a6e22e>get</span>(K key) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> rank <span style=color:#f92672>=</span> rank(key);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (rank <span style=color:#f92672>&lt;</span> size <span style=color:#f92672>&amp;&amp;</span> keys<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span>.<span style=color:#a6e22e>compareTo</span>(key) <span style=color:#f92672>==</span> 0) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> values<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>put</span>(K key, V value) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> rank <span style=color:#f92672>=</span> rank(key);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (rank <span style=color:#f92672>&lt;</span> size <span style=color:#f92672>&amp;&amp;</span> keys<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span>.<span style=color:#a6e22e>compareTo</span>(key) <span style=color:#f92672>==</span> 0) {
</span></span><span style=display:flex><span>                values<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> value;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            ensureCapacity(size <span style=color:#f92672>+</span> 1);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> size; j <span style=color:#f92672>&gt;</span> rank; j<span style=color:#f92672>--</span>) {
</span></span><span style=display:flex><span>                <span style=color:#75715e>// move the prev element forward to make an empty to save new element</span>
</span></span><span style=display:flex><span>                keys<span style=color:#f92672>[</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> keys<span style=color:#f92672>[</span>j <span style=color:#f92672>-</span> 1<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>                values<span style=color:#f92672>[</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> values<span style=color:#f92672>[</span>j <span style=color:#f92672>-</span> 1<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            keys<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> key;
</span></span><span style=display:flex><span>            values<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> value;
</span></span><span style=display:flex><span>            size<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Automatic expansion</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>ensureCapacity</span>(<span style=color:#66d9ef>int</span> newCapacity) {
</span></span><span style=display:flex><span>            <span style=color:#75715e>// keys is enough for newCapacity</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (newCapacity <span style=color:#f92672>&lt;</span> keys.<span style=color:#a6e22e>length</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#75715e>// increase by double</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> newKeys <span style=color:#f92672>=</span> (K<span style=color:#f92672>[]</span>) Array.<span style=color:#a6e22e>newInstance</span>(Comparable.<span style=color:#a6e22e>class</span>, keys.<span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> 2);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> newValues <span style=color:#f92672>=</span> (V<span style=color:#f92672>[]</span>) Array.<span style=color:#a6e22e>newInstance</span>(Comparable.<span style=color:#a6e22e>class</span>, values.<span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> 2);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> keys.<span style=color:#a6e22e>length</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (keys<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                    newKeys<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> keys<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>                    newValues<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> values<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            keys <span style=color:#f92672>=</span> newKeys;
</span></span><span style=display:flex><span>            values <span style=color:#f92672>=</span> newValues;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>remove</span>(K key) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> rank <span style=color:#f92672>=</span> rank(key);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (rank <span style=color:#f92672>&lt;</span> size <span style=color:#f92672>&amp;&amp;</span> keys<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span>.<span style=color:#a6e22e>equals</span>(key)) {
</span></span><span style=display:flex><span>                <span style=color:#75715e>// move the next element forward</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> rank <span style=color:#f92672>+</span> 1; i <span style=color:#f92672>&lt;</span> size; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                    keys<span style=color:#f92672>[</span>i <span style=color:#f92672>-</span> 1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> keys<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>                    values<span style=color:#f92672>[</span>i <span style=color:#f92672>-</span> 1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> values<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                size<span style=color:#f92672>--</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> K <span style=color:#a6e22e>ceil</span>(K key) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> rank <span style=color:#f92672>=</span> rank(key);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (rank <span style=color:#f92672>&lt;</span> size <span style=color:#f92672>&amp;&amp;</span> keys<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span>.<span style=color:#a6e22e>compareTo</span>(key) <span style=color:#f92672>==</span> 0) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> keys<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> rank <span style=color:#f92672>&gt;=</span> size <span style=color:#f92672>?</span> <span style=color:#66d9ef>null</span> : keys<span style=color:#f92672>[</span>rank<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>rank</span>(K key) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> start <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> end <span style=color:#f92672>=</span> size;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>while</span> (start <span style=color:#f92672>&lt;=</span> end) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>var</span> middle <span style=color:#f92672>=</span> start <span style=color:#f92672>+</span> (end <span style=color:#f92672>-</span> start) <span style=color:#f92672>/</span> 2;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (keys<span style=color:#f92672>[</span>middle<span style=color:#f92672>]</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                    end <span style=color:#f92672>=</span> middle <span style=color:#f92672>-</span> 1;
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>continue</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>var</span> compare <span style=color:#f92672>=</span> key.<span style=color:#a6e22e>compareTo</span>(keys<span style=color:#f92672>[</span>middle<span style=color:#f92672>]</span>);
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (compare <span style=color:#f92672>==</span> 0) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> middle;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (compare <span style=color:#f92672>&gt;</span> 0) {
</span></span><span style=display:flex><span>                    start <span style=color:#f92672>=</span> middle <span style=color:#f92672>+</span> 1;
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                    end <span style=color:#f92672>=</span> middle <span style=color:#f92672>-</span> 1;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> start;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> K <span style=color:#a6e22e>floor</span>(K key) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> left <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> right <span style=color:#f92672>=</span> size <span style=color:#f92672>-</span> 1;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>while</span> (left <span style=color:#f92672>&lt;=</span> right) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>var</span> middle <span style=color:#f92672>=</span> left <span style=color:#f92672>+</span> (right <span style=color:#f92672>-</span> left) <span style=color:#f92672>/</span> 2;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>var</span> compare <span style=color:#f92672>=</span> keys<span style=color:#f92672>[</span>middle<span style=color:#f92672>]</span>.<span style=color:#a6e22e>compareTo</span>(key);
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (compare <span style=color:#f92672>==</span> 0) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> keys<span style=color:#f92672>[</span>middle<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (compare <span style=color:#f92672>&gt;</span> 0) {
</span></span><span style=display:flex><span>                    right <span style=color:#f92672>=</span> middle <span style=color:#f92672>-</span> 1;
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                    left <span style=color:#f92672>=</span> middle <span style=color:#f92672>+</span> 1;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#75715e>// target is left than minimal value of keys</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (right <span style=color:#f92672>&lt;</span> 0) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (left <span style=color:#f92672>&gt;=</span> size) { <span style=color:#75715e>// left is greater than the max keys</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> keys<span style=color:#f92672>[</span>size <span style=color:#f92672>-</span> 1<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> keys<span style=color:#f92672>[</span>right<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>containsKey</span>(K key) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> get(key) <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span>() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> sb <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> StringBuilder();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>var</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> size; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (keys<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>                    sb.<span style=color:#a6e22e>append</span>(keys<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>).<span style=color:#a6e22e>append</span>(<span style=color:#e6db74>&#39;=&#39;</span>).<span style=color:#a6e22e>append</span>(values<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>);
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (i <span style=color:#f92672>&lt;</span> size <span style=color:#f92672>-</span> 1) {
</span></span><span style=display:flex><span>                        sb.<span style=color:#a6e22e>append</span>(<span style=color:#e6db74>&#39;,&#39;</span>);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> sb.<span style=color:#a6e22e>toString</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> set <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArraySortedSet<span style=color:#f92672>&lt;</span>Integer, Integer<span style=color:#f92672>&gt;</span>();
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(2, 2);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(1, 1);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(3, 3);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(4, 4);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(5, 5);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(6, 6);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(7, 7);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(8, 8);
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(9, 9);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set.<span style=color:#a6e22e>get</span>(3));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set.<span style=color:#a6e22e>get</span>(<span style=color:#f92672>-</span>1));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set.<span style=color:#a6e22e>get</span>(2));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set.<span style=color:#a6e22e>ceil</span>(2));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set.<span style=color:#a6e22e>ceil</span>(<span style=color:#f92672>-</span>1));
</span></span><span style=display:flex><span>        set.<span style=color:#a6e22e>put</span>(0, 0);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set.<span style=color:#a6e22e>ceil</span>(<span style=color:#f92672>-</span>1));
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(set);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=reference>Reference</h2><ul><li><em><strong>Oracle</strong></em> - <a href=https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html target=_blank rel=noopener>SortedSet</a></li><li><em><strong>Wikipedia</strong></em> - <a href=https://en.wikipedia.org/wiki/Binary_search_algorithm target=_blank rel=noopener>Binary search algorithm</a></li></ul><div class=blog-footer><div class=social-share></div><div class=copyright><ul><li style=margin-bottom:.5em>Author: <a href=https://ddhigh.com/ target=_blank style=color:#000;text-decoration:none>xialeistudio</a></li><li style=margin-bottom:.5em>Link: <a href=https://www.ddhigh.com/en/2023/05/06/implement-a-sorted-set-by-array/ target=_blank style=color:#000;text-decoration:none>Implementing a sorted set by ordered array</a></li><li>Copyright: <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank style=color:#000;text-decoration:none>「CC BY-NC 4.0 DEED」</a></li></ul></div></div></section><div class=paginator><a class=prev href=https://www.ddhigh.com/en/2023/05/16/minimum-difficulty-of-a-job-schedule/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>Minimum difficulty of a job schedule</span></a>
<a class=next href=https://www.ddhigh.com/en/2023/05/05/how-to-retry-requests-correctly/><span>How to retry requests correctly with Feign</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div><div class=comments><script>const getTheme=window.localStorage&&window.localStorage.getItem("theme");let theme=getTheme==="dark"?"dark":"light",s=document.createElement("script");s.src="https://giscus.app/client.js",s.setAttribute("data-repo","xialeistudio/discussion"),s.setAttribute("data-repo-id","R_kgDOKurTRA"),s.setAttribute("data-category","General"),s.setAttribute("data-category-id","DIC_kwDOKurTRM4CbCJt"),s.setAttribute("data-mapping","pathname"),s.setAttribute("data-strict","0"),s.setAttribute("data-reactions-enabled","1"),s.setAttribute("data-emit-metadata","0"),s.setAttribute("data-input-position","bottom"),s.setAttribute("data-theme",theme),s.setAttribute("data-lang","en"),s.setAttribute("data-loading","lazy"),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div></article></div><footer class=footer><p>&copy; 2014 - 2024 <a href=https://www.ddhigh.com/>每天进步一点点</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script><script src=https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js integrity="sha512-9DNXrSjk17bU9MUbRp3IjwcWe46V8FaGA062PFbryPUAEQVRbz4jiZP6FW0AdbqEGtMYBDWnul3eiGBMJOQajA==" crossorigin=anonymous referrerpolicy=no-referrer></script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>