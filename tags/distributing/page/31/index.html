<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>distributing</title>
<meta charset=utf-8><meta name=description content="Ladder@Learning & Writing & Sharing"><meta name=author content="Lei Xia"><link rel=canonical href=https://www.ddhigh.com/tags/distributing/><link rel=alternate type=application/rss+xml href=https://www.ddhigh.com/index.xml title="Lei Xia"><script async defer data-website-id=865c8529-0729-4cf5-88a9-448616abbcbb src=https://umami-beta-peach.vercel.app/xialeistudio></script><meta property="og:title" content="distributing"><meta property="og:description" content="Learning & Writing & Sharing"><meta property="og:type" content="website"><meta property="og:url" content="https://www.ddhigh.com/tags/distributing/"><meta name=twitter:card content="summary"><meta name=twitter:title content="distributing"><meta name=twitter:description content="Learning & Writing & Sharing"><link rel=icon href=/img/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/img/favicon.ico><link rel=manifest href=/img/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ff1bc260fafbfb440e10194d7d06d57eb5e85eed11d12d06255581262664204e.css integrity="sha256-/xvCYPr7+0QOEBlNfQbVfrXoXu0R0S0GJVWBJiZkIE4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.894ca9c68afab956438c4926a0dc7f5293e04e08595bd27abdb123e94801f684.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/guestbook>Guestbook</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/xialeistudio><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><div class=blog-wrapper><div><div class=blog-list><article><div class=blog-card><h3><a href=/2014/09/07/php-oop-getter-setter/>php OOP中的__get和__set方法</a></h3><p><small>September 7, 2014&nbsp;· 75 words&nbsp;· One minute</small><p>__get,__set光看前面两个下划线就知道是魔术方法了，而且还是PHP OOP中比较重要的方法。
先看一段代码
&lt;?php class Account{ private $user = 1; private $pwd = 2; } $a = new Account(); echo $a->user; $a->name = 5; echo $a->name; echo $a->big; 运行这段代码结果是肯定会报错的！
原因在于，不能访问私有属性user。利用__get和__set改进下这个类
&lt;?php class Account{ private $user = 1; private $pwd = 2; public function __set($name,$value){ $this->name = $value; } public function __get($name){ if(!isset($this->name)){ $this->name = '这是默认值'; } return $this->name; } } $a = new Account(); echo $a->user; $a->name = 5; echo $a->name; echo $a->big; 运行之后就不会报错了。</div></article><article><div class=blog-card><h3><a href=/2014/09/06/angularjs-lazy-load/>摆脱jquery!angularjs利用指令简单实现滚动翻页</a></h3><p><small>September 6, 2014&nbsp;· 80 words&nbsp;· One minute</small><p>移动开发一个很重要的问题是翻页操作，而现在的主流都是滚动翻页，以往都是用jquery的插件进行实现。用了angularjs之后，要逐步减轻对jquery的依赖。
滚动翻页基本原理就是判断scrollTop和offsetHeight之和 大于等于 scrollHeight
代码 指令 app.directive('whenScrolled', function() { return function(scope, elm, attr) { var raw = elm[0]; elm.bind('scroll', function() { if (raw.scrollTop+raw.offsetHeight &amp;gt;= raw.scrollHeight) { scope.$apply(attr.whenScrolled); } }); }; }); 控制器 $scope.loadMore = function() { if ($scope.currentPage &amp;lt; $scope.pages) { $scope.currentPage++; if ($scope.busy) { return false; } $scope.busy = true; $http.get('/api.php?r=site/list/page/'+$scope.currentPage+'/limit/'+$scope.limit).success(function(data) { $scope.busy = false; for (var i in data.data) { $scope.newses.push(data.data[i]); } $scope.pages = Math.ceil(data.total/$scope.limit); $rootScope.title = '首页 - 微文章'; }); } }; 视图 &lt;div when-scrolled="loadMore()"> //内容处理逻辑 &lt;/div></div></article><article><div class=blog-card><h3><a href=/2014/09/06/php-convert-date-to-constellation/>PHP将日期转换为星座</a></h3><p><small>September 6, 2014&nbsp;· 93 words&nbsp;· One minute</small><p>这几日在做的一个项目发现一个很有意思的东西，就是PHP将指定日期输出为星座
&lt;?php function constellation($month, $day) { if ($month &lt; 1 || $month > 12 || $day &lt; 1 || $day > 31) return false; $constellations = array( array("20" => '水瓶座'), array("19" => '双鱼座'), array("21" => '白羊座'), array("20" => '金牛座'), array("21" => '双子座'), array("22" => '巨蟹座'), array("23" => '狮子座'), array("23" => '处女座'), array("23" => '天秤座'), array("24" => '天蝎座'), array("22" => '射手座'), array("22" => '摩羯座') ); list($constellation_start, $constellation_name) = each($constellations[(int)$month - 1]); if ($day &lt; $constellation_start) list($constellation_start, $constellation_name) = each($constellations[($month - 2 &lt; 0) ?</div></article><article><div class=blog-card><h3><a href=/2014/09/06/ng-resource-get-started/>ngResource快速上手</a></h3><p><small>September 6, 2014&nbsp;· 48 words&nbsp;· One minute</small><p>废话不多说，本文的目的就是看过之后就会使用ngResource了。
引入angular-resource.min.js 定义模块时加载ngResource 定义service 完整代码如下
var app = angular.module('app', ["ngResource"]); app.factory('Phone', ['$resource', function($resource) { return $resource('user/:uid', { uid: '@uid' }, { update: { method: 'PUT' } }); }]); app.controller('MainCtrl', ['$scope', 'Phone', function($scope, Phone) { $scope.phones = Phone.query(); Phone.update({ uid: 1 }, { name: "zhangsan", age: "10" }); }]);</div></article><article><div class=blog-card><h3><a href=/2014/09/06/php-heredoc/>PHP heredoc 字符串定界符使用</a></h3><p><small>September 6, 2014&nbsp;· 15 words&nbsp;· One minute</small><p>PHP定义字符串有三种形式
双引号 单引号 heredoc定界符 前面两种大家都很熟悉了，第三种大家用的少。一般在输出大段HTML的时候很方便，不多说，上代码！
&lt;?php $link = 'https://www.google.com.hk'; print &lt;&lt;&lt;DOGS &lt;a href="{$link}"}Google&lt;/a> DOGS; DOGS可以自己定义。</div></article><article><div class=blog-card><h3><a href=/2014/09/06/jquery-write-a-plugin/>jquery插件写法</a></h3><p><small>September 6, 2014&nbsp;· 131 words&nbsp;· One minute</small><p>项目地址 http://xialeistudio.github.io/search/
jquery插件确实是数不胜数，只要你用心找，肯定能找得到!
但是一些小功能想自己写，找的话估计时间还长些，本文简单开发一个 基于jquery的获取url查询字符串的 小插件。
插件的模版（$.extend扩展jquery内置方法)
(function($) { $.x_search = function(_name,target) { //x_search是插件名字,_name、target是参数 }; })(jQuery); /** * $.x_search * @extends jquery 2.1.1(基于该版本开发，其他版本自测) * @fileOverview 获取url queryString * @author xialeistudio * @email 1065890063@qq.com * @site www.ddhigh.com * @version 0.0.1 * @date 2014-08-12 * @license MIT * @example * 获取当个Key * $.x_search('name'); * 获取所有 * $.x_search(); */ (function($) { $.x_search = function(_name,target) { if(typeof target == 'undefined'){ target = window.location.search; } if (typeof _name == 'undefined') { //所有 var query =target.</div></article><article><div class=blog-card><h3><a href=/2014/09/06/bower-get-started/>bower快速入门</a></h3><p><small>September 6, 2014&nbsp;· 47 words&nbsp;· One minute</small><p>简介 bower是twitter的又一个开源项目，使用nodejs开发，用于web包管理。如果越来越多得开源项目都托管在github上，bower只需要将github上项目加上一个配置文件既可以使用bower方式使用安装包。作为包管理，bower能提供添加新web包，更新web包，删除web包，发布web包功能，管理包依赖。web包通常认为由html+css+javascript构成。
安装bower npm install bower -g 请确保你有Nodejs环境
在项目目录中运行
bower install jquery 运行成功之后项目中会多出components文件夹，文件夹中jquery文件夹，jquery文件夹里面就有最新的jquery文件。
这还不能说明他NB的地方，试想下面的场景，jQuery升级了，是不是再down一次jQuery呢？bower可以这样做：
bower update jquery 就可以自动升级到最新版的jquery了。
再假设我们需要使用bootstrap，bootstrap可不是一个文件，有css,js还有图片。js还依赖于jQuery，如果使用bower：
bower install bootstrap bower会自动从github上down最新的代码，而且，会自动将依赖包jquery也down一次。
如果你发布程序的时候不想把一些依赖的库发布上去（主要原因是太大了 - - ），可以在项目根目录下生成一个 bower.json 文件用来管理依赖。
在项目目录下执行
bower init 按照提示操作就好，这样子会生成一个bower文件
安装 jquery
bower install jquery --save 这样子 bower.json 文件就会写入一个 Jquery的依赖项
别人只要在项目目录下输入
bower install 就会自动安装了</div></article><article><div class=blog-card><h3><a href=/2014/09/06/php-cors-crossdomain/>php使用CORS实现跨域请求</a></h3><p><small>September 6, 2014&nbsp;· 15 words&nbsp;· One minute</small><p>js跨域的解决方法，一百度一大堆，不过都是jsonp为主，这种解决方法只适用于GET请求。POST跨域的话需要在HTTP协议上下功夫。
基础知识 主要会用到以下几个响应头
Access-Control-Allow-Origin：允许哪些url可以跨域请求到本域 Access-Control-Allow-Methods:允许的请求方法，一般是GET,POST,PUT,DELETE,OPTIONS Access-Control-Max-Age：表明在该时间段内不再“预检”允许的请求方法（相当于缓存），即不以OPTIONS方法进行请求 Access-Control-Allow-Headers：允许哪些请求头可以跨域 php代码 &lt;?php header('Access-Control-Allow-Origin:*'); header('Access-Control-Allow-Methods:POST'); header('Access-Control-Max-Age:60'); header('Access-Control-Allow-Headers:x-requested-with,content-type'); header('Content-Type:application/json;charset=utf-8'); print_r(file_get_contents('php://input'));</div></article><article><div class=blog-card><h3><a href=/2014/09/06/aliyun-phpmailer/>阿里云ECS服务器phpmailer发信失败解决方法</a></h3><p><small>September 6, 2014&nbsp;· 24 words&nbsp;· One minute</small><p>phpmailer之前一直在用，一般都是采用smtp登录服务器的方式进行发信，今天在本地windows主机测试也能发信成功，但是到线上去就不行了，提示“连接smtp服务器失败”。 首先可以排除的是代码方面的错误，那么剩下就知道服务器的问题了。
根据这个错误，可以想到有几种问题:
服务器ping不通，做Ping测试的时候是通的 服务器端口没开，用telnet测试的时候也是这样的 后来在服务器上用php代码测试163邮箱发现可以发信，但是腾讯的就不行，看了下邮箱配置发现是SSL的问题，然后在服务器上输出phpinfo()发现没有openssl扩展。
接下来就是安装扩展了。
首先进到php的源码包，前往ext/openssl目录 执行 phpize 这个会自动配置 然后执行 ./configure --with-openssl -with-php-config=/usr/local/php/bin/php-config make make install 这里模块安装就完成了，但是需要编辑 /etc/php.ini加上
extension=openssl.so 重启 web 服务器就可以了。经过测试，服务器上SSL发信也能成功进行</div></article><article><div class=blog-card><h3><a href=/2014/09/06/nginx-virtual-host/>nginx虚拟主机配置</a></h3><p><small>September 6, 2014&nbsp;· 71 words&nbsp;· One minute</small><p>最近服务器上用的环境是lnmp，之前一直在用apache，配置虚拟主机也是很方便的。今天查资料发现Nginx的虚拟主机配置更加简单。
server { listen 80; server_name domain1; location / { root html/domain1; index index.html index.htm index.php; } location ~ \.php$ { root html/domain1; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } } server { listen 80; server_name domain2; location / { root html/domain2; index index.html index.htm index.php; } location ~ \.php$ { root html/domain2; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } } 保存之后，执行
nginx -s reload</div></article></div><div class=paginator><a class=prev href=/tags/distributing/page/30/>&larr;&nbsp;&nbsp;Pre Page</a>
<a class=next href=/tags/distributing/page/32/>Next Page&nbsp;&nbsp;&rarr;</a></div></div></div></div><footer class=footer><p>&copy; 2014 - 2023 <a href=https://www.ddhigh.com>Lei Xia</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
<a href=https://umami-beta-peach.vercel.app/ target=_blank>Statistics</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg></a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>