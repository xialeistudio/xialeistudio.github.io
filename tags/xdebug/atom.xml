<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>xdebug on Lei Xia</title><link>https://www.ddhigh.com/tags/xdebug/</link><description>Recent content in xdebug on Lei Xia</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Wed, 08 Jun 2016 12:25:21 +0800</lastBuildDate><atom:link href="https://www.ddhigh.com/tags/xdebug/atom.xml" rel="self" type="application/rss+xml"/><item><title>phpstorm+xdebug远程调试服务器PHP代码</title><link>https://www.ddhigh.com/2016/06/08/phpstorm-xdebug-remote-debug/</link><pubDate>Wed, 08 Jun 2016 12:25:21 +0800</pubDate><guid>https://www.ddhigh.com/2016/06/08/phpstorm-xdebug-remote-debug/</guid><description>&lt;p>phpstorm+xdebug如何调试本地代码应该都熟悉了。本文说的是如何调试线上服务器的代码。本文写作时服务器的PHP环境是lnmp1.2。&lt;/p>
&lt;h2 id="服务器配置">服务器配置&lt;/h2>
&lt;h3 id="安装debug">安装debug&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>pecl install xdebug
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="编辑phpini">编辑php.ini&lt;/h3>
&lt;p>编辑 &lt;strong>/usr/local/php/etc/php.ini&lt;/strong>，在末尾加上以下代码：&lt;/p>
&lt;pre tabindex="0">&lt;code>[Xdebug]
zend_extension=&amp;#34;xdebug.so&amp;#34;
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_host=【调试终端所在的公网IP】
xdebug.remote_port=9000
xdebug.remote_autostart=1
xdebug.idekey=&amp;#34;PHPSTORM&amp;#34;
&lt;/code>&lt;/pre>&lt;p>本文中调试终端为&lt;strong>PHPSTORM&lt;/strong>，所以本地公网IP为&lt;strong>remote_host&lt;/strong>的值&lt;br>
&lt;a href="http://www.ip138.com">查看本地公网IP&lt;/a>&lt;br>
更改配置完毕后终端执行:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>lnmp php-fpm reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ide配置">IDE配置&lt;/h2>
&lt;h3 id="配置server">配置server&lt;/h3>
&lt;p>Setting =&amp;gt; Languages &amp;amp; Frameworks=&amp;gt;PHP=&amp;gt;Servers，
&lt;img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2016/06/QQ%E5%9B%BE%E7%89%8720160608121441.png" alt="Server配置">&lt;/p>
&lt;h3 id="配置dbgp-proxy">配置DBGp Proxy&lt;/h3>
&lt;p>Settings =&amp;gt; Languages &amp;amp; Frameworks =&amp;gt; PHP =&amp;gt; Debug =&amp;gt; DBGp Proxy
&lt;img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2016/06/QQ%E5%9B%BE%E7%89%8720160608121659.png" alt="DBGp Proxy">&lt;br>
其中红框处需要和服务器的xdebug配置文件一致。&lt;/p>
&lt;h2 id="路由端口映射">路由端口映射&lt;/h2>
&lt;p>由于大部分朋友公司都有路由器的，所以本机IP是局域网IP，这里需要将路由器的端口映射到本地。具体规则如下：&lt;/p>
&lt;pre tabindex="0">&lt;code>服务器Xdebug端口（路由器公网端口） =&amp;gt; 本地端口，笔者这里把路由器的9000端口映射到本地的9000端口。
&lt;/code>&lt;/pre>&lt;h2 id="开始调试">开始调试&lt;/h2>
&lt;ul>
&lt;li>打开项目的运行配置，选择“PHP Web Application”&lt;br>
&lt;img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2016/06/QQ%E5%9B%BE%E7%89%8720160608122018.png" alt="开始调试">&lt;br>
笔者服务器这里是https的，所以加了https，各位读者请根据实际情况填写网址。&lt;/li>
&lt;li>点击IDE的“电话”图标开启远程监听。&lt;br>
&lt;img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2016/06/QQ%E6%88%AA%E5%9B%BE20160608122148.png" alt="监听">&lt;/li>
&lt;li>代码断点&lt;br>
&lt;img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2016/06/QQ%E6%88%AA%E5%9B%BE20160608122222.png" alt="代码断点">&lt;/li>
&lt;li>开始调试&lt;br>
&lt;img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2016/06/QQ%E6%88%AA%E5%9B%BE20160608122259.png" alt="开始调试">&lt;/li>
&lt;li>IDE自动弹出调试窗口&lt;br>
&lt;img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2016/06/QQ%E6%88%AA%E5%9B%BE20160608122347.png" alt="IDE自动弹出调试窗口">&lt;/li>
&lt;/ul></description></item></channel></rss>