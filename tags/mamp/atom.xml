<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>mamp on Lei Xia</title><link>https://www.ddhigh.com/tags/mamp/</link><description>Recent content in mamp on Lei Xia</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Tue, 16 Feb 2016 15:45:25 +0800</lastBuildDate><atom:link href="https://www.ddhigh.com/tags/mamp/atom.xml" rel="self" type="application/rss+xml"/><item><title>MAMP下使用pecl安装PHP扩展</title><link>https://www.ddhigh.com/2016/02/16/mamp-install-php-extension/</link><pubDate>Tue, 16 Feb 2016 15:45:25 +0800</pubDate><guid>https://www.ddhigh.com/2016/02/16/mamp-install-php-extension/</guid><description>&lt;p>之前写过一篇在Mac下搭建PHP开发环境的文章，[Mac搭建PHP开发环境]({% post_url 2016-02-16-mac-php-env %})，但是此种方式搭建的PHP有弊端，由于默认不带PHP源码，所以在使用pecl安装扩展时会报错。&lt;/p>
&lt;h2 id="测试安装扩展">测试安装扩展&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo pecl install mongo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>运行起来后会报形如“php.h not found”的错误，因为MAMP默认是不带PHP源码包的。&lt;/p>
&lt;h2 id="配置扩展安装环境">配置扩展安装环境&lt;/h2>
&lt;p>按照如下步骤将源码包集成以便于安装扩展：
1.在web目录下添加index.php文件，内容如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;?&lt;/span>&lt;span style="color:#a6e22e">php&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">phpinfo&lt;/span>();
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>2.打开浏览器访问该php文件，记录PHP版本，本文暂定&lt;strong>PHP版本A&lt;/strong>。&lt;br>
3.打开终端，输入以下命令：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">php&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#a6e22e">v&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>记录PHP版本，本文暂定&lt;strong>PHP版本B&lt;/strong>。&lt;br>
4.如果PHP版本A不等于PHP版本B，在终端执行以下命令：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo rm -rf /usr/bin/php
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo rm -rf /usr/bin/phpize
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo rm -rf /usr/bin/php-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo rm -rf /usr/bin/pecl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -s /Application/MAMP/bin/php/php&lt;span style="color:#f92672">[&lt;/span>PHP版本A&lt;span style="color:#f92672">]&lt;/span>/bin/php /usr/bin/php
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -s /Application/MAMP/bin/php/php&lt;span style="color:#f92672">[&lt;/span>PHP版本A&lt;span style="color:#f92672">]&lt;/span>/bin/php-config /usr/bin/php-config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -s /Application/MAMP/bin/php/php&lt;span style="color:#f92672">[&lt;/span>PHP版本A&lt;span style="color:#f92672">]&lt;/span>/bin/phpize /usr/bin/phpize
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -s /Application/MAMP/bin/php/php&lt;span style="color:#f92672">[&lt;/span>PHP版本A&lt;span style="color:#f92672">]&lt;/span>/bin/pecl /usr/bin/pecl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>请替换**[PHP版本A]&lt;strong>为步骤2中的版本，如&lt;/strong>5.5.18**&lt;br>
执行完以上命令之后，命令行模式和浏览器模式的PHP都是一致的了。&lt;br>
5.下载PHP源码包，打开浏览器访问如下网址 &lt;a href="http://cn2.php.net/get/php-">http://cn2.php.net/get/php-&lt;/a>&lt;strong>[PHP版本A]&lt;/strong>.tar.gz/from/this/mirror。&lt;br>
6.将下载的压缩包解压到 /Application/MAMP/bin/php/php**[PHP版本A]**/include/php 中。&lt;br>
7.在终端执行以下命令：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd /Application/MAMP/bin/php/php&lt;span style="color:#f92672">[&lt;/span>PHP版本A&lt;span style="color:#f92672">]&lt;/span>/include/php
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./configure
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>此时PHP源码包已经配置正常了，头文件也可以正常调用了。&lt;br>
8.在终端执行：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo pecl install mongo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>扩展安装成功后，编辑*/Application/MAMP/bin/php/php*[PHP版本A]&lt;em>/conf/php.ini&lt;/em> 在最后添加：&lt;/p>
&lt;pre tabindex="0">&lt;code>extension=mongo.so
&lt;/code>&lt;/pre>&lt;p>9.由于命令行模式和浏览器模式中加载的php.ini并不是同一个文件，所以需要用软连接的方式处理下。终端执行：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>php -i|grep ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>查看&lt;strong>Loaded ini file&lt;/strong>路径，本文假设为&lt;strong>PHP配置文件A&lt;/strong>。&lt;br>
10.备份&lt;strong>PHP配置文件A&lt;/strong>，终端执行：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ln -s /Application/MAMP/bin/php/php&lt;span style="color:#f92672">[&lt;/span>PHP版本A&lt;span style="color:#f92672">]&lt;/span>/conf/php.ini PHP配置文件A
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>11.终端执行：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>php -i|grep ini
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>此时该路径应该和浏览器中看到的是一致的了。&lt;/p>
&lt;h2 id="安装扩展">安装扩展&lt;/h2>
&lt;ol>
&lt;li>sudo pecl install &lt;strong>[扩展名]&lt;/strong>&lt;/li>
&lt;li>编辑 /Application/MAMP/bin/php/php**[PHP版本A]**/conf/php.ini 加载扩展&lt;/li>
&lt;li>重启Web服务器&lt;/li>
&lt;/ol></description></item><item><title>MAMP PRO 3.0.5 在 OS X EI Capitan下无法启动的问题</title><link>https://www.ddhigh.com/2015/11/13/mamp-pro-can-not-launch/</link><pubDate>Fri, 13 Nov 2015 22:06:16 +0800</pubDate><guid>https://www.ddhigh.com/2015/11/13/mamp-pro-can-not-launch/</guid><description>&lt;p>网上找了很多文章，什么关闭自带的apache服务，查看系统日志等等，全没用。真佩服 baidu。&lt;br>
还是google到了一篇文章，解决方法很简单:&lt;br>
1.打开终端&lt;br>
2.执行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>cd /Applications/MAMP/Library/bin/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mv envvars _envvars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>3.enjoy&lt;/p></description></item></channel></rss>