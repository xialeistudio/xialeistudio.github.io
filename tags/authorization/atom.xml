<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>authorization on Lei Xia</title><link>https://www.ddhigh.com/tags/authorization/</link><description>Recent content in authorization on Lei Xia</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Mon, 25 Sep 2023 11:22:17 +0000</lastBuildDate><atom:link href="https://www.ddhigh.com/tags/authorization/atom.xml" rel="self" type="application/rss+xml"/><item><title>Understanding RBAC</title><link>https://www.ddhigh.com/2023/09/25/understanding-rbac/</link><pubDate>Mon, 25 Sep 2023 11:22:17 +0000</pubDate><guid>https://www.ddhigh.com/2023/09/25/understanding-rbac/</guid><description>&lt;blockquote>
&lt;p>&lt;a href="https://en.wikipedia.org/wiki/Role-based_access_control">Role-based access control(RBAC)&lt;/a> is a policy-neutral access control mechanism defined around &lt;strong>roles&lt;/strong> and &lt;strong>privileges&lt;/strong>. The components of RBAC such as &lt;strong>role-permissions&lt;/strong>, &lt;strong>user-role&lt;/strong> and role-role relationships make it simple to perform user assignments.&lt;/p>
&lt;/blockquote>
&lt;p>In this article, I&amp;rsquo;ll share some information about RBAC and ABAC.&lt;/p>
&lt;p>The basic idea of RBAC is to separate permission management from users to reduce management complexity and provider higher flexibility and security. By using roles as a middle layer, administrators can more easily manage user permissions without having to focus on each user&amp;rsquo;s permission settings.&lt;/p>
&lt;h2 id="terminology">Terminology&lt;/h2>
&lt;p>There are 3 terminologies in RBAC:&lt;/p>
&lt;ul>
&lt;li>Role&lt;/li>
&lt;li>Permisson&lt;/li>
&lt;li>User&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Role&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Role is an abstract concept to define a set of related permission. For example, there are some roles in one system: administrator, normal user, guest, each role has a related permissions.&lt;/li>
&lt;li>Roles gives users corresponding access rights by assigning permissions to them.&lt;/li>
&lt;li>In some implementation, Roles can form hierachies to provider higher flexibility.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Permission&lt;/strong>&lt;/p>
&lt;p>Permission is an ability to perform specific action or access specific resource.&lt;/p>
&lt;ul>
&lt;li>Permission describes a requirement to access resource or action in a system.&lt;/li>
&lt;li>There are 2 ways to define permission: allow and deny. Allow permission allows user to access a resource or perform an action, it likes a whitelist; Deny permission denied user to access a resource or perform an action, it likes a blacklist.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>User&lt;/strong>&lt;/p>
&lt;p>An user is an identity in a system, which could be assigned different roles to grant different permissions.&lt;/p>
&lt;h2 id="implementation">Implementation&lt;/h2>
&lt;p>It&amp;rsquo;s simple to implement a RBAC in a system. In the following content, I&amp;rsquo;ll provider a simple implementation.&lt;/p>
&lt;p>&lt;strong>Table Definitation&lt;/strong>&lt;/p>
&lt;p>&lt;strong>Role&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>column name&lt;/th>
&lt;th>column type&lt;/th>
&lt;th>column description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>int&lt;/td>
&lt;td>Role id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>varchar(40)&lt;/td>
&lt;td>role name&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>description&lt;/td>
&lt;td>varchar(128)&lt;/td>
&lt;td>A brief description of the role&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enabled&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>whether the role is enabled&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>created_at&lt;/td>
&lt;td>datetime&lt;/td>
&lt;td>when the role is created&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Permission&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>column name&lt;/th>
&lt;th>column type&lt;/th>
&lt;th>column description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>int&lt;/td>
&lt;td>permission id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>varchar(40)&lt;/td>
&lt;td>permission name&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>description&lt;/td>
&lt;td>varchar(128)&lt;/td>
&lt;td>A brief description of the permission&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>created_at&lt;/td>
&lt;td>datetime&lt;/td>
&lt;td>when the permission is created&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Role-Permission&lt;/strong>&lt;/p>
&lt;p>An table represents what permissions the specific role has.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>column name&lt;/th>
&lt;th>column type&lt;/th>
&lt;th>column description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>role_id&lt;/td>
&lt;td>int&lt;/td>
&lt;td>Role id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>permission_id&lt;/td>
&lt;td>int&lt;/td>
&lt;td>permission id&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>User&lt;/strong>&lt;/p>
&lt;p>User represents an identity who has the access to log in this system.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>column name&lt;/th>
&lt;th>column type&lt;/th>
&lt;th>column description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>int&lt;/td>
&lt;td>user id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>username&lt;/td>
&lt;td>varchar(20)&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>password&lt;/td>
&lt;td>varchar(255)&lt;/td>
&lt;td>A hashed password&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>varchar(20)&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>created_at&lt;/td>
&lt;td>datetime&lt;/td>
&lt;td>when the user is created&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>User Role&lt;/strong>&lt;/p>
&lt;p>An table represents what roles the specific user has.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>column name&lt;/th>
&lt;th>column type&lt;/th>
&lt;th>column description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>user_id&lt;/td>
&lt;td>int&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>role_id&lt;/td>
&lt;td>Int&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Example Data&lt;/strong>&lt;/p>
&lt;p>Imaging you are designing a RBAC in a CRM system.&lt;/p>
&lt;p>&lt;strong>User&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>id&lt;/th>
&lt;th>username&lt;/th>
&lt;th>password&lt;/th>
&lt;th>name&lt;/th>
&lt;th>created_at&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>staff1&lt;/td>
&lt;td>-&lt;/td>
&lt;td>staff1&lt;/td>
&lt;td>2023-01-01 10:00:00&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>manager1&lt;/td>
&lt;td>-&lt;/td>
&lt;td>manager1&lt;/td>
&lt;td>2023-01-01 10:00:00&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Role&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>id&lt;/th>
&lt;th>name&lt;/th>
&lt;th>description&lt;/th>
&lt;th>enabled&lt;/th>
&lt;th>created_at&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>salesman&lt;/td>
&lt;td>-&lt;/td>
&lt;td>true&lt;/td>
&lt;td>2023-01-01 10:00:00&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>manager&lt;/td>
&lt;td>-&lt;/td>
&lt;td>true&lt;/td>
&lt;td>2023-01-01 10:00:00&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Permission&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>id&lt;/th>
&lt;th>name&lt;/th>
&lt;th>description&lt;/th>
&lt;th>created_at&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>customer:create&lt;/td>
&lt;td>-&lt;/td>
&lt;td>2023-01-01 10:00:00&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>customer:update&lt;/td>
&lt;td>-&lt;/td>
&lt;td>2023-01-01 10:00:00&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>customer:delete&lt;/td>
&lt;td>-&lt;/td>
&lt;td>2023-01-01 10:00:00&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>customer:view&lt;/td>
&lt;td>-&lt;/td>
&lt;td>2023-01-01 10:00:00&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Role-Permission&lt;/strong>&lt;/p>
&lt;p>The following data shows the salesman allows create/update/view a customer and the manager has the full access.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>role_id&lt;/th>
&lt;th>permission_id&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>4&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>User-Role&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>user_id&lt;/th>
&lt;th>role_id&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>2&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Sequence diagram&lt;/strong>&lt;/p>
&lt;p>The following diagram shows an example of an user logged in and create a customer.&lt;/p>
&lt;pre class="mermaid">sequenceDiagram
User->>+LoginService: Logged in
LoginService->>+Database: Query user by username and password
Database-->>-LoginService: An user or empty
LoginService->>+Database: Query roles and permissions of current user
Database-->>-LoginService: Roles and permissions list
LoginService-->>+LoginService: add roles and permissions to session.
LoginService-->>-LoginService: add completed
LoginService-->>-User: Logged in
User-->>+CustomerService: create customer
CustomerService-->>+CustomerService: check whether there is a 'customer:create' permission in session
CustomerService-->>-CustomerService: found permission, allow operation
CustomerService-->>+Database: create a customer
Database-->>-CustomerService: create completed
CustomerService-->>-User: create succeed
&lt;/pre>
&lt;h2 id="conclusion">Conclusion&lt;/h2>
&lt;p>Role-based access control (RBAC) has important application value in the field of access control. By associating permissions with roles, RBAC implements a structured access control management method. The implementation of RBAC can improve management efficiency and enhance system security.&lt;/p>
&lt;h2 id="references">References&lt;/h2>
&lt;ul>
&lt;li>[1] &lt;a href="https://en.wikipedia.org/wiki/Role-based_access_control">Role-based access control&lt;/a> &amp;ndash; WikiPedia&lt;/li>
&lt;/ul></description></item></channel></rss>