<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>openssl</title>
<meta charset=utf-8><meta name=description content="Ladder@Learning & Writing & Sharing"><meta name=author content="Lei Xia"><link rel=canonical href=https://www.ddhigh.com/tags/openssl/><link rel=alternate type=application/rss+xml href=https://www.ddhigh.com/index.xml title="Lei Xia"><script async defer data-website-id=865c8529-0729-4cf5-88a9-448616abbcbb src=https://umami-beta-peach.vercel.app/xialeistudio></script><meta property="og:title" content="openssl"><meta property="og:description" content="Learning & Writing & Sharing"><meta property="og:type" content="website"><meta property="og:url" content="https://www.ddhigh.com/tags/openssl/"><meta name=twitter:card content="summary"><meta name=twitter:title content="openssl"><meta name=twitter:description content="Learning & Writing & Sharing"><link rel=icon href=/img/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/img/favicon.ico><link rel=manifest href=/img/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ff1bc260fafbfb440e10194d7d06d57eb5e85eed11d12d06255581262664204e.css integrity="sha256-/xvCYPr7+0QOEBlNfQbVfrXoXu0R0S0GJVWBJiZkIE4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.894ca9c68afab956438c4926a0dc7f5293e04e08595bd27abdb123e94801f684.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/guestbook>Guestbook</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=https://umami-beta-peach.vercel.app/>Dashboard</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/xialeistudio><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><div class=blog-wrapper><div><div class=blog-list><article><div class=blog-card><h3><a href=/2017/06/24/rsa-in-node-php/>使用RSA在PHP和NodeJs中进行加密数据通信</a></h3><p><small>June 24, 2017&nbsp;· 367 words&nbsp;· 2 min</small><p>RSA算法是目前用的最多的非对称加密算法，文本将基于openssl在nodejs和php中进行加密数据通信。
生成密钥对 openssl genrsa -out private.key 2048 rsa -in private.key -pubout -out public.key 执行完命令后，可以在当前目录看到:
public.key 公钥 private.key 私钥 NodeJs服务器 本文使用koa2来构建一个基于openssl加密方案的http服务器。 源码使用typescript进行开发。
安装依赖 npm init -y npm install typescript koa koa-router @types/node @types/koa @types/koa-router --save 最终的package.json内容如下：
{ "name": "openssl-demo", "version": "1.0.0", "description": "", "main": "index.js", "scripts": { "build": "tsc -w", "start": "node index.js" }, "keywords": [], "author": "", "license": "ISC", "dependencies": { "@types/koa": "^2.0.39", "@types/koa-router": "^7.0.22", "@types/node": "^8.0.2", "koa": "^2.3.0", "koa-router": "^7.</div></article><article><div class=blog-card><h3><a href=/2016/12/13/apply-startssl-certificate/>免费SSL证书申请</a></h3><p><small>December 13, 2016&nbsp;· 79 words&nbsp;· One minute</small><p>收费SSL证书对于个人来说还是略贵，本文将交大家申请免费的SSL证书。
打开申请网站 startssl.com
点击Sign-up注册 注册链接 在打开的表单中填写自己的email 点击Send vertification code按钮，等待系统发送注册邮件 将邮件收到的code填入表单中 完成注册 登录 登录链接 点击Client Certificate Login 输入email地址，点击Send One Time Password 登录邮箱，复制code，填入表单中 点击Login 申请证书 验证域名 验证地址 选择**Domain Validation(for SSL certificate) 点击Continue 输入您的域名(不带www)，点击Continue 在接下来的域名中选择您的邮箱，点击Send Vertification Code 将email收到的code输入Verification code表单项中，点击Validation Validation Success 申请证书 申请链接 在Please enter the full hostname for SSL certificate下方的textarea中输入您的域名，可以输入多个，但是请注意，所有域名必须为您验证域名的子域名，每行一个，最多为10个！ 在Please submit your Certificate Signing Request中选择Generated by Myself (.cer PEM format certificate) 打开您的终端，执行openssl req -newkey rsa:2048 -keyout yourname.key -out yourname.csr，根据需求回答问题，其中CommonName请填写您的域名（不带www） 将生成的公钥(路径~/.ssh/id_rsa.pub)粘贴在textarea中 点击Submit 申请完成 下载证书 在右侧的SSL/TLS Server点击您的证书即可开始下载</div></article><article><div class=blog-card><h3><a href=/2016/10/31/php-openssl-rsa-sign/>PHP利用openssl实现RSA非对称加密签名</a></h3><p><small>October 31, 2016&nbsp;· 48 words&nbsp;· One minute</small><p>阅读本文前请确认启用了php_openssl扩展
生成密钥 $res = openssl_pkey_new(); openssl_pkey_export_to_file($res,__DIR__.'/private.key'); $d = openssl_pkey_get_details($res); file_put_contents(__DIR__.'/public.key',$d['key']); 程序运行后会在当前目录生成 private.key 以及 public.key文件，你可以将你的public.key公开出去，请勿公开private.key
加密数据 $data = 'xialei'; $res = openssl_pkey_get_private(file_get_contents(__DIR__ . '/private.key')); if (openssl_sign($data, $out, $res)) { $data = base64_encode($out); echo $data; } 加密数据需要使用private.key
验证数据 $sig = base64_decode($data); $res = openssl_pkey_get_public(file_get_contents(__DIR__ . '/public.key')); var_dump(openssl_verify('xialei', $sig, $res)); 解密数据需要使用public.key，如果输出"int(1)&ldquo;证明解密成功，可以确认该数据由第1步中的private.key加密而来。</div></article><article><div class=blog-card><h3><a href=/2014/09/06/aliyun-phpmailer/>阿里云ECS服务器phpmailer发信失败解决方法</a></h3><p><small>September 6, 2014&nbsp;· 24 words&nbsp;· One minute</small><p>phpmailer之前一直在用，一般都是采用smtp登录服务器的方式进行发信，今天在本地windows主机测试也能发信成功，但是到线上去就不行了，提示“连接smtp服务器失败”。 首先可以排除的是代码方面的错误，那么剩下就知道服务器的问题了。
根据这个错误，可以想到有几种问题:
服务器ping不通，做Ping测试的时候是通的 服务器端口没开，用telnet测试的时候也是这样的 后来在服务器上用php代码测试163邮箱发现可以发信，但是腾讯的就不行，看了下邮箱配置发现是SSL的问题，然后在服务器上输出phpinfo()发现没有openssl扩展。
接下来就是安装扩展了。
首先进到php的源码包，前往ext/openssl目录 执行 phpize 这个会自动配置 然后执行 ./configure --with-openssl -with-php-config=/usr/local/php/bin/php-config make make install 这里模块安装就完成了，但是需要编辑 /etc/php.ini加上
extension=openssl.so 重启 web 服务器就可以了。经过测试，服务器上SSL发信也能成功进行</div></article></div></div></div></div><footer class=footer><p>&copy; 2014 - 2023 <a href=https://www.ddhigh.com>Lei Xia</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg></a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>