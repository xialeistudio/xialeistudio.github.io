<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>Posts</title>
<meta charset=utf-8><meta name=description content="Ladder@Posts - Lei Xia"><meta name=author content="Lei Xia"><link rel=canonical href=https://www.ddhigh.com/posts/><link rel=alternate type=application/rss+xml href=https://www.ddhigh.com/index.xml title="Lei Xia"><script async defer data-website-id=865c8529-0729-4cf5-88a9-448616abbcbb src=https://umami-beta-peach.vercel.app/xialeistudio></script><meta property="og:title" content="Posts"><meta property="og:description" content="Learning & Writing & Sharing"><meta property="og:type" content="website"><meta property="og:url" content="https://www.ddhigh.com/posts/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="Learning & Writing & Sharing"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.ddhigh.com/posts/"}]}</script><link rel=icon href=/img/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/img/favicon.ico><link rel=manifest href=/img/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ff1bc260fafbfb440e10194d7d06d57eb5e85eed11d12d06255581262664204e.css integrity="sha256-/xvCYPr7+0QOEBlNfQbVfrXoXu0R0S0GJVWBJiZkIE4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.894ca9c68afab956438c4926a0dc7f5293e04e08595bd27abdb123e94801f684.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/books>Books</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/guestbook>Guestbook</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/xialeistudio><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><div class=blog-wrapper><div><div class=blog-list><article><div class=blog-card><h3><a href=/2015/05/29/shell-to-install-memached-on-lnmp/>lnmp一键安装memcached的shell脚本</a></h3><p><small>May 29, 2015&nbsp;· 35 words&nbsp;· One minute</small><p>通过LNMP安装脚本安装的PHP环境默认是不带Memcached支持的（是memcached不是memcache），百度一下memcached的安装方法，发现基本都是memcache的，其实这是两个不同的东西。
而memcached是pecl的项目，所以需要到pecl网站上去下载最新的memcached安装包。
为了方便多台服务器的安装，本人整理成了一个sh脚本进行安装，当然,php-config路径和phpize路径需要改下（如果使用LNMP脚本安装的话则不用改）
#!/bin/bash wget https://launchpad.net/libmemcached/1.0/0.53/+download/libmemcached-0.53.tar.gz tar xvfz libmemcached-0.53.tar.gz cd libmemcached-0.53 ./configure --prefix=/usr/local/libmemcached --enable-sasl make && make install wget http://pecl.php.net/get/memcached-2.0.0.tgz tar zvxf memcached-2.0.0.tgz cd memcached-2.0.0/ phpize ./configure --enable-memcached --with-php-config=/usr/local/php/bin/php-config --with-libmemcached-dir=/usr/local/libmemcached --enable-memcached-sasl make && make install</div></article><article><div class=blog-card><h3><a href=/2015/05/21/shell-bad-interpreter/>linux运行dos格式脚本导致的bad interpreter</a></h3><p><small>May 21, 2015&nbsp;· 28 words&nbsp;· One minute</small><p>问题 在使用php作为linux上shell脚本运行时出现了以下错误：
#!/usr/bin/env php &lt;?php phpinfo(); chmod +x test.php ./test.php /usr/local/php/bin/php^M: bad interpreter: No such file or directory 原因是你的文本以DOS文件形式保存，导致文件头有不可见字符，导致bash shell无法解析。
解决办法 yum install dos2unix -y dos2unix test.php 再执行就没问题了</div></article><article><div class=blog-card><h3><a href=/2015/05/17/svg-loading/>svg制作loading</a></h3><p><small>May 17, 2015&nbsp;· 58 words&nbsp;· One minute</small><p>还在使用gif做loading效果吗？你确实out了，再不济也得用css3动画是不是&ndash;。无奈，css3旋转动画需要一张png图片来做，也没什么问题，现在，有更炫酷的方案了。
没错!就是SVG。svg其实不是什么新东西。SVG 于 2003 年 1 月 14 日成为 W3C 推荐标准。现在浏览器越来越强大，所以，尽情使用吧！
代码 &lt;div style="width: 200px;height: 200px;background: #000000"> &lt;svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg"> &lt;g> &lt;circle cx="100" cy="100" r="50" fill="none" stroke-width="2" stroke="rgba(255,255,255,0.2)"/> &lt;path d="M100 50 A50 50 0 0 1 150 100 " style="stroke: rgba(255,255,255,.7);stroke-width: 2"/> &lt;animateTransform attributeName="transform" fill="freeze" attributeType="XML" type="rotate" from="0,100,100" to="360,100,100" dur="1s" repeatCount="indefinite" /> &lt;/g> &lt;/svg> &lt;/div> 效果</div></article><article><div class=blog-card><h3><a href=/2015/04/13/php-filecache/>php文件缓存类</a></h3><p><small>April 13, 2015&nbsp;· 176 words&nbsp;· One minute</small><p>缓存有很多方法，memcache,databse,file,redis等等，原理都差不多，简要介绍一下，写入缓存就不多说了，主要是读取缓存。
检测指定key是否存在，如不存在则返回false。 检测指定key是否过期，如过期则返回false。 指定key存在且未过期，返回缓存值。 本文介绍文件缓存的实现，其他类型可以参照实现。
&lt;?php /** * @project wechatPublicPlatform * @date 2015-4-13 * @author xialei &lt;xialeistudio@gmail.com> */ class Cache { function __construct() { throw new Exception('不可被实例化'); } /** * 设置缓存 * @param string $key * @param string $value * @param int $expires 0为不过期 * @return int */ public static function set($key, $value, $expires = 0) { $cachePath = __DIR__ . '/cache'; if (!is_dir($cachePath)) { mkdir($cachePath, 666); } $data = [ 'key' => $key, 'value' => $value, 'expires' => $expires ]; return file_put_contents($cachePath .</div></article><article><div class=blog-card><h3><a href=/2015/04/09/angularjs-upload-directive-with-progress/>带进度条的angularjs上传指令</a></h3><p><small>April 9, 2015&nbsp;· 484 words&nbsp;· 3 min</small><p>项目地址 https://git.coding.net/xialei/xl-angular-upload.git
效果图 指令代码 angular.module('xl-angular-upload', []) .directive('angularUpload', [function () { return { restrict: 'E', require: 'ngModel', template: '&lt;div class="xl-angular-upload">\n &lt;!--upload button-->\n &lt;button class="xl-btn btn-primary">上传\n &lt;input type="file"/>\n &lt;/button>\n &lt;!--upload queue-->\n &lt;div class="queue">\n &lt;div class="item" ng-repeat="item in queue">\n &lt;div class="info">\n &lt;div class="no">{{$index+1}}&lt;/div>\n &lt;div class="name">{{item.name}}&lt;/div>\n &lt;div class="size">{{(item.size/1024).toFixed(2)}}KB&lt;/div>\n &lt;/div>\n &lt;div class="process-bar">\n &lt;div class="process" style="width:{{item.process}}%">&lt;/div>\n &lt;/div>\n &lt;/div>\n &lt;/div>\n&lt;/div>', replace: true, link: function (scope, ele, attrs, ctrl) { //必要属性检测 if (!attrs.action) { throw new Error('请设置上传action'); } //初始化 scope.</div></article><article><div class=blog-card><h3><a href=/2015/04/06/angularjs-q/>在AngularJS中使用$q进行“同步”编程</a></h3><p><small>April 6, 2015&nbsp;· 73 words&nbsp;· One minute</small><p>今天群里有位朋友问到直接返回$http说读不到数据，原因在于$http是异步请求，而且是“不可期”的，你不知道什么时候这个请求完成了。
而对于这种需要“同步”编程的方式，AngularJS提供了一个内置Service $q，它提供了一种承诺/延后（promise/deferred），可以保证我们的调用代码一定能够拿到数据。所以我们用起来可以像同步调用一样，话说回来，最终还是xhr异步请求。
##　Factory
app.factory('itemService', ['$http', '$q', function ($http, $q) { return { query : function() { var deferred = $q.defer();//声明承诺 $http({method: 'GET', url: '/item/list'}). success(function(data) { deferred.resolve(data);//请求成功 }). error(function(data) { deferred.reject(data); //请求失败 }); return deferred.promise; // 返回承诺，这里返回的不是数据，而是API } }; }]); Controller angular.module('app') .controller('MainCtrl', ['itemService','$scope', function (itemService,$scope) { // 注入itemService var promise = itemService.query(); //获得承诺接口 promise.then(function(data) { // 成功回调 $scope.user = data; }, function(data) { // 错误回调 console.log('请求失败'); }); }]); 文档地址 http://docs.</div></article><article><div class=blog-card><h3><a href=/2015/04/06/angularjs-hello-world/>angularjs Hello World</a></h3><p><small>April 6, 2015&nbsp;· 43 words&nbsp;· One minute</small><p>几乎所有的编程入门都是以"Hello World"开始的，这里也不例外。
HTML代码 &lt;!DOCTYPE html> &lt;!--使用ng-app指令“告诉”ng从哪里开始编译--> &lt;html ng-app="app"> &lt;head lang="en"> &lt;meta charset="UTF-8"> &lt;title>Hello World - Angularjs&lt;/title> &lt;script src="../vendor/angularjs/angular.js">&lt;/script> &lt;script src="main.js">&lt;/script> &lt;/head> &lt;body> &lt;p>&lt;/p> &lt;input type="text" ng-model="message" placeholder="说点什么"/> &lt;/body> &lt;/html> JS代码 /** * @author xialei &lt;xialeistudio@gmail.com> */ var app = angular.module('app',[ ]); 双向绑定为ng内置，所以这里的js，实际上只有一个app定义罢了。
在输入框中输入任何字符都会及时在其之前的p元素显示出来。</div></article><article><div class=blog-card><h3><a href=/2015/04/06/angularjs-concept-to-explain/>Angularjs概念解释</a></h3><p><small>April 6, 2015&nbsp;· 28 words&nbsp;· One minute</small><p>本文所有内容仅代表个人观点 ng Angularjs的简称。
指令(Directive) 特殊的html标签或html属性，扩展了html的功能。有以下几类：
E Element 元素 如 就是一个自定义指令（如何自定义指令，将在后面的文章中介绍），名称为"dropdown"。 A Attribute 属性 如 这是最常用的指令了，ng-app为指令名称，也是html元素的属性，app为该属性的值 作用域(scope) ng中变量、方法都是基于作用域的，作用类似于js作用域。
ng-bind *html输出js变量，跟作用域绑定，message为作用域中的一个变量。*示例代码：
&lt;button ng-bind="message">&lt;/button> 最终会显示同一scope下的message变量值。
ng-model 双向绑定指令，示例代码：
&lt;input type="text" ng-model="message"/> 表明将input的值与作用域中的message变量进行绑定，当input值改变的时候，变量message跟着改变，html中输出的内容也会同步改变。</div></article><article><div class=blog-card><h3><a href=/2015/03/16/gulp-workflow/>使用gulp来构建你的前端自动化工作流</a></h3><p><small>March 16, 2015&nbsp;· 155 words&nbsp;· One minute</small><p>之前用的Grunt，不过有时候Grunt确实用起来不爽，进来找到一款叫gulp.js的前端构建工具，当然，也是基于node.js的。
安装 npm install gulp --save-dev npm install del gulp-concat gulp-cssmin gulp-uglify --save-dev 配置 配置gulpfile.js，如果工作目录下没有该文件，请新建gulpfile.js，以下为一个常用的参考代码:
/** * @author xialei &lt;xialeistudio@gmail.com> */ (function () { "use strict"; /** * 加载插件 * @type {exports} */ var gulp = require('gulp'); var del = require('del'); var cssmin = require('gulp-cssmin'); var concat = require('gulp-concat'); var uglify = require('gulp-uglify'); /** * 清空目录的命令 */ gulp.task('clean', function () { del(['build']); }); gulp.task('css', function () { /** * 加载源代码 */ return gulp.</div></article><article><div class=blog-card><h3><a href=/2015/03/07/phpexcel-a-lot-of-column/>PHPExcel导出时列过大的解决方案</a></h3><p><small>March 7, 2015&nbsp;· 46 words&nbsp;· One minute</small><p>今天导出Excel的时候，列不是固定的，而且有差不多几十个，横轴由&rsquo;A&rsquo;变为了&rsquo;AA&rsquo;，给导出时增加了难度，因为要去算列名称，不过换个方式想一下，发现是很有规律的26进制数。 发现秘诀后就好办了，发一个10进制转26进制的方法。
代码 private function numberToStr26($n) { $s = ''; while ($n > 0) { $m = $n % 26; if ($m == 0) $m = 26; $s = chr($m + 64) . $s; $n = ($n - $m) / 26; } return $s; } 效果图</div></article></div><div class=paginator><a class=prev href=/posts/page/24/>&larr;&nbsp;&nbsp;Pre Page</a>
<a class=next href=/posts/page/26/>Next Page&nbsp;&nbsp;&rarr;</a></div></div></div></div><footer class=footer><p>&copy; 2014 - 2023 <a href=https://www.ddhigh.com>Lei Xia</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
<a href=https://umami-beta-peach.vercel.app/ target=_blank>Statistics</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg></a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>