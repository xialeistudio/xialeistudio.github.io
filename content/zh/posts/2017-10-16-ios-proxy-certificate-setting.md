---
slug: ios-proxy-certificate-setting
title: ios新版本代理设置问题
date: 2017-10-16 14:23:55
categories:
- Engineering
---
# 背景
系统是iOS11，电脑端用的charles代理，目前需要查看一些https网站返回的数据，还是使用老方法把charles的根证书设为信任，手机也打开**chls.pro/ssl**把证书添加到系统了。
但是抓包的时候依旧无法访问，safari直接提示“该网站提供的证书不可信任”，查看详情发现charles证书虽然安装，但是没生效。

# 解决方法
可能是iOS加强了安全性以及用户体验，往常的时候一旦我们加入证书，除非卸载，该证书是一直生效的（排除掉被吊销或者过期情况），而iOS11在**设置-通用-关于手机-证书信任设置**中可以方便开关证书。
之前在iOS10.3也出现过问题，解决方法应该也是一致的。