<!doctype html><html lang=zh><head><meta name=viewport content="width=device-width,initial-scale=1"><title>Engineering</title>
<meta charset=utf-8><meta name=google-adsense-account content="ca-pub-2871082647721658"><meta content="Web开发 ,Java ,Go ,Node.js ,PHP ,Koa ,MySQL ,Redis ,前端 ,后端 ,数据库" name=keywords><meta name=description content="欢迎来到我的博客！这里提供与Web开发相关的文章，涵盖Java、Go、Node.js、PHP、Koa、MySQL和Redis等技术。从前端到后端，为您提供有关Web应用程序开发的实用指南和建议。探索最佳实践，了解RESTful API设计、响应式网页设计以及性能和安全性方面的知识。"><meta name=author content="Lei Xia"><link rel=canonical href=https://www.ddhigh.com/categories/engineering/><link rel=alternate type=application/rss+xml href=https://www.ddhigh.com//index.xml title=每天进步一点点><script async defer data-website-id=52f8f0f9-d93d-466b-8ef5-508aae8c4ed4 src=https://analysis.ddhigh.com/script.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EC3XLVSGKV"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EC3XLVSGKV")</script><meta property="og:url" content="https://www.ddhigh.com/categories/engineering/"><meta property="og:site_name" content="每天进步一点点"><meta property="og:title" content="Engineering"><meta property="og:description" content="欢迎来到我的博客！这里提供与Web开发相关的文章，涵盖Java、Go、Node.js、PHP、Koa、MySQL和Redis等技术。从前端到后端，为您提供有关Web应用程序开发的实用指南和建议。探索最佳实践，了解RESTful API设计、响应式网页设计以及性能和安全性方面的知识。"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Engineering"><meta name=twitter:description content="欢迎来到我的博客！这里提供与Web开发相关的文章，涵盖Java、Go、Node.js、PHP、Koa、MySQL和Redis等技术。从前端到后端，为您提供有关Web应用程序开发的实用指南和建议。探索最佳实践，了解RESTful API设计、响应式网页设计以及性能和安全性方面的知识。"><link rel=icon href=/img/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/img/favicon.ico><link rel=manifest href=/img/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.d0df733b91ef046970ecd63de7aa626886fd263fd3fb2b8ff28b560e505831f7.css integrity="sha256-0N9zO5HvBGlw7NY956piaIb9Jj/T+yuP8otWDlBYMfc=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css integrity="sha512-ygEyjMC6rqnzJqWGjRTJUPYMEs9JUOm3i7OWUS9CgQ4XkBUvMsgCS1I8JqavidQ2ClHcREB7IbA2mN08+r9Elg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>$darkModeInit.Content|safeJS</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>每天进步一点点
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/>首页</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>归档</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/books>出版物</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/guestbook>留言板</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/xialeistudio><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li><li class="navigation-item navigation-language"><a href=https://www.ddhigh.com/en/categories/engineering/>EN</a></li></ul></section></nav><div id=content><div class=blog-wrapper><div><div class=blog-list><article><div class=blog-card><h3><a href=/2018/02/08/nodejs-thrift-multiple-client/>nodejs thrift多路复用客户端</a></h3><p><small>2018年2月8日&nbsp;· 103 字&nbsp;· 1 分钟</small><p>官网nodejs示例中只实现了服务端是单一service的情形，而对于服务端属于多个服务复用一个连接地址的例子却未实现。
查看thrift的nodejs库源码发现实际上还是支持的。以下来展示调用单一服务和多个服务的区别。
单一服务 var thrift = require('thrift'); var Calculator = require('.</div></article><article><div class=blog-card><h3><a href=/2018/02/01/golang-generic-pool/>golang通用连接池的实现</a></h3><p><small>2018年2月1日&nbsp;· 321 字&nbsp;· 2 分钟</small><p>golang的channel除了goroutine通信之外还有很多其他的功能，本文将实现一种基于channel的通用连接池。
何为通用？ 连接池的实现不依赖具体的实例，而依赖某个接口，本文的连接池选用的是io.Closer接口，只要是实现了该接口的对象都可以被池管理。 当然，你可以实现基于interface{}的连接池，这样任何对象都可以被管理。
实现原理 将连接句柄存入channel中，由于缓存channel的特性，获取连接时如果池中有连接，将直接返回，如果池中没有连接，将阻塞或者新建连接（没超过最大限制的情况下）。 由于面向接口编程，所有创建连接的逻辑是不清楚的，这里需要传入一个函数，该函数返回一个io.</div></article><article><div class=blog-card><h3><a href=/2018/01/31/goroutine-limit-demo/>golang限制协程数量</a></h3><p><small>2018年1月31日&nbsp;· 113 字&nbsp;· 1 分钟</small><p>为什么要限制协程数量 golang的go关键字并发实在是太简单，但是带来的问题是由于硬件和网络状况的限制，不受控制的增加协程是非常危险的做法，甚至有可能搞垮数据库之类的应用! 而并发控制在go中是非常常用的技巧，以此文来记录一下学习历程。
原理 由于channel的阻塞机制，通过设置缓冲channel的缓冲大小来控制同时执行的协程数量。</div></article><article><div class=blog-card><h3><a href=/2018/01/30/tnwz/>头脑王者辅助</a></h3><p><small>2018年1月30日&nbsp;· 67 字&nbsp;· 1 分钟</small><p>头脑王者 本项目仅作为学习anyproxy之用，请勿用于非法用途，否则后果自负
功能 题目爬取 答题匹配(如果题库不存在，请自行答题，系统会在答题后把正确答案自动录入数据库) 开始 安装mysql，新建数据库tnwz，建表语句 CREATE TABLE tnwz.</div></article><article><div class=blog-card><h3><a href=/2018/01/20/golang-memory-leak/>golang可能导致内存泄漏的地方</a></h3><p><small>2018年1月20日&nbsp;· 8 字&nbsp;· 1 分钟</small><p>核心 golang能够GC是程序声明的变量，而一些外部资源是不可以GC掉的，比如os.OpenFile打开的文件句柄，sql.Open打开的数据库连接句柄等资源。
开发中常用场景 http请求时resp.Body，刚开始写golang的时候，如果会用ioutil.readAll去读取resp.Body时会加上defer resp.Body.Close(),后来有json.NewDecoder().decode()时没有加，以为会自动关闭，没想到还是太天真了。不管什么情况都需要defer resp.</div></article><article><div class=blog-card><h3><a href=/2018/01/20/php-async/>PHP实现“异步”</a></h3><p><small>2018年1月20日&nbsp;· 13 字&nbsp;· 1 分钟</small><p>众所周知，PHP不使用多线程扩展的情况下是不支持异步的(不算curl之类)。今天无意中看到一个函数fastcgi_finish_request; 这个方法是PHP5.3+开始提供。 注释写的很清楚，有耗时操作的时候使用该函数可以尽早结束fastcgi处理过程，提高页面响应速度。
代码说明 &lt;?php echo 1; fastcgi_finish_request(); sleep(3); ?</div></article><article><div class=blog-card><h3><a href=/2017/11/25/wechat-web-subscribe/>微信H5点击跳转到关注页</a></h3><p><small>2017年11月25日&nbsp;· 26 字&nbsp;· 1 分钟</small><p>背景 微信诱导关注接口在早两年已经被微信关停，但是一般的H5目的都是要关注公众号。 目前用的多的方法是用公众号发表一篇文章，文章里面一般是一个GIF的箭头图片指向公众号关注。 这种方法有点取巧。
今天要介绍的是另一种方法，感觉应该不会被微信封号。</div></article><article><div class=blog-card><h3><a href=/2017/11/23/go-rtmp-http-publisher/>从零开始打造自己的直播服务器-golang开发HTTP推流服务</a></h3><p><small>2017年11月23日&nbsp;· 450 字&nbsp;· 3 分钟</small><p>目前笔者只知道ffmpeg命令行推流到RTMP服务器，是没有HTTP接口的，像iOS和Android这种Native应用应该有RTMP SDK封装推流逻辑。但是像微信小程序这种录制音频只有原始ArrayBuffer的数据，则必须在服务端提供接口来进行推流。
本文将基于golang标准库以及ffmpeg命令来实现。
服务端原理 客户端上传base64编码后的音频数据 服务端接收后解码为**[]byte** 将**[]byte**写入本地文件 golang调用ffmpeg命令将第3步写入的文件推流到RTMP服务端 golang输出JSON响应，如果出错则返回错误JSON响应 { "errmsg":"ok", "errcode":0 } 开始开发 由于采用了log4go日志库https://github.</div></article><article><div class=blog-card><h3><a href=/2017/11/23/nginx-rtmp-server/>从零开始打造自己的直播服务器-Nginx安装</a></h3><p><small>2017年11月23日&nbsp;· 225 字&nbsp;· 2 分钟</small><p>直播行业火了很长一段时间了，抛开那些复杂的实现，本系列将从零开始实现一个直播服务器。
功能 RTMP拉流(基于HLS) RTMP推流(基于ffmpeg) RTMP推流(基于HTTP) 安装Nginx 本文使用docker的ubuntu镜像作为种子机，非常干净!</div></article><article><div class=blog-card><h3><a href=/2017/11/21/log4go-get-started/>log4go尝鲜</a></h3><p><small>2017年11月21日&nbsp;· 101 字&nbsp;· 1 分钟</small><p>序言 日志系统对于软件是必不可少的，可以帮助我们记录关键信息，后期处理问题的时候会很方便。业界有很多出名的日志库，log4日志库相信每个人都不陌生，像log4j之于Java，log4php之于PHP等等。其实golang也有很多的log4实现，本文要使用的是alecthomas实现的版本。
项目地址 https://github.com/alecthomas/log4go
安装 go get github.</div></article></div><div class=paginator><a class=prev href=/categories/engineering/page/10/>&larr;&nbsp;&nbsp;Pre Page</a>
<a class=next href=/categories/engineering/page/12/>Next Page&nbsp;&nbsp;&rarr;</a></div></div></div></div><footer class=footer><p>&copy; 2014 - 2024 <a href=https://www.ddhigh.com/>每天进步一点点</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script><script src=https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js integrity="sha512-9DNXrSjk17bU9MUbRp3IjwcWe46V8FaGA062PFbryPUAEQVRbz4jiZP6FW0AdbqEGtMYBDWnul3eiGBMJOQajA==" crossorigin=anonymous referrerpolicy=no-referrer></script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>