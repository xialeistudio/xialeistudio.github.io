<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>Engineering</title>
<meta charset=utf-8><meta name=description content="Ladder@Learning & Writing & Sharing"><meta name=author content="Lei Xia"><link rel=canonical href=https://www.ddhigh.com/categories/engineering/><link rel=alternate type=application/rss+xml href=https://www.ddhigh.com/index.xml title="Lei Xia"><script async defer data-website-id=865c8529-0729-4cf5-88a9-448616abbcbb src=https://umami-beta-peach.vercel.app/xialeistudio></script><meta property="og:title" content="Engineering"><meta property="og:description" content="Learning & Writing & Sharing"><meta property="og:type" content="website"><meta property="og:url" content="https://www.ddhigh.com/categories/engineering/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Engineering"><meta name=twitter:description content="Learning & Writing & Sharing"><link rel=icon href=/img/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/img/favicon.ico><link rel=manifest href=/img/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ff1bc260fafbfb440e10194d7d06d57eb5e85eed11d12d06255581262664204e.css integrity="sha256-/xvCYPr7+0QOEBlNfQbVfrXoXu0R0S0GJVWBJiZkIE4=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.894ca9c68afab956438c4926a0dc7f5293e04e08595bd27abdb123e94801f684.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/tags>Tags</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/books>Books</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/guestbook>Guestbook</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/xialeistudio><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><div class=blog-wrapper><div><div class=blog-list><article><div class=blog-card><h3><a href=/2014/10/31/ucenter-empty/>UCenter 后台应用通知列表空白</a></h3><p><small>October 31, 2014&nbsp;· 7 words&nbsp;· One minute</small><p>今天遇到了一个奇葩的问题UCenter后台通知列表空白并且500，通过xdebug调试发现是**uc_server/control/admin/note.php 第68行代码有问题!**IDE都报错了
原代码 $this->_format_notlist(&$notelist); 修正代码 $this->_format_notlist($notelist); 可能是由于PHP版本升级导致的问题。</div></article><article><div class=blog-card><h3><a href=/2014/10/30/angularjs-html5mode-404/>解决 angularjs html5Mode 404的问题</a></h3><p><small>October 30, 2014&nbsp;· 12 words&nbsp;· One minute</small><p>采用location的html5Mode之后，链接是正常的，但是刷新的时候会404，此时就需要后端服务器配置URL重写了。
nginx 配置 location / { try_files $uri $uri/ /index.html$is_args$args; } 这样子就可以将所有不是文件夹且不是文件的请求转发到index.html。</div></article><article><div class=blog-card><h3><a href=/2014/10/28/ie7ie8-support-html5-attribute/>让IE7,IE8支持html5属性</a></h3><p><small>October 28, 2014&nbsp;· 38 words&nbsp;· One minute</small><p>HTML5确实很好用，但是国内IE7和IE8的用户还是挺多的（或许是XP的缘故）。这些浏览器不识别HTML5的新属性以及&lt;!doctype html>，导致页面渲染进入“怪异”模式，简直就是“不堪入目”。
不过，还好，开源的力量是强大的，有热心的开发者写了一套JS库来兼容IE7,IE8。本文就简单教大家用下这款JS库。
1.下载
2.解压之后得到html5shiv.js
3.开发模板
&lt;!DOCTYPE html> &lt;html> &lt;head> &lt;meta charset="utf-8"> &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"> &lt;meta name="viewport" content="width=device-width, initial-scale=1"> &lt;title>Template&lt;/title> &lt;!--[if lt IE 9]> &lt;script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js">&lt;/script> &lt;script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js">&lt;/script> &lt;![endif]--> &lt;/head> &lt;body> &lt;h1>你好，世界！&lt;/h1> &lt;script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js">&lt;/script> &lt;/body> &lt;/html> 使用这个库之后就可以正常开发啦。
题外话：IE系列好像是不太好兼容的。</div></article><article><div class=blog-card><h3><a href=/2014/10/24/phpexcel-export-empty/>PHPExcel导出时为空的解决方法</a></h3><p><small>October 24, 2014&nbsp;· 11 words&nbsp;· One minute</small><p>今天在做数据导出的时候遇到个麻烦事情，SQL查询是有数据的，但是写入excel的时候为空的。
输出异常是有一行遇到错误了。将那一行数据打印出来发现字段中有个 = 号，excel中有 = 会将后面的当作表达式计算，所以导致错误。
解决方式是在 = 前面加上单引号 &lsquo;= 就可以了</div></article><article><div class=blog-card><h3><a href=/2014/10/21/mobile-textarea-auto-fit/>移动端textarea自适应高度</a></h3><p><small>October 21, 2014&nbsp;· 8 words&nbsp;· One minute</small><p>PC端网页的textarea内容多了会出现滚动条，这个没什么，鼠标么，滚动方便。但是移动端是没鼠标的，出现滚动条是很不友好的行为。
利用js的事件绑定及动态改变CSS就可以做到这个了。
onpropertychange="this.style.height=this.scrollHeight + 'px'" oninput="this.style.height=this.scrollHeight + 'px'"</div></article><article><div class=blog-card><h3><a href=/2014/10/15/linux-check-port/>linux检查端口占用</a></h3><p><small>October 15, 2014&nbsp;· 10 words&nbsp;· One minute</small><p>Linux启动服务时如果遇到端口占用问题时，一般有以下两种解决方案：
新启动的服务更改端口号启动 杀掉老的进程 Linux检查端口占用命令 netstat -lnp | grep 80 80为端口号，查找到占用端口的进程ID后用kill杀掉即可。</div></article><article><div class=blog-card><h3><a href=/2014/10/14/mobile-realtime-check/>移动端实时检测输入框</a></h3><p><small>October 14, 2014&nbsp;· 19 words&nbsp;· One minute</small><p>PC浏览器的话由于有blur和focus事件，可以在失去焦点时进行一次验证，但是移动端有点麻烦，点击其他地方才可以，这种的话体验不是很好。 利用input事件可以解决这个问题。
$(document).on('input','#username',function(){ //验证逻辑 }); 测试之后问题确实来了，每输入一个字符就会触发，浪费很多网络请求，接下来使用一个定时器的技术来进行处理。
var timer; $(document).on('input','#username',function(){ timer && clearTimeout(timer); timer = setTimeout(function(){ //验证逻辑 },500);//延时0.5s触发 }); 采用这种定时器技术可以在请求次数和用户体验之间取得平衡，很多地方都可以使用这种技术来实现。</div></article><article><div class=blog-card><h3><a href=/2014/10/11/nginx-enable-ssl/>nginx服务器启用SSL访问</a></h3><p><small>October 11, 2014&nbsp;· 82 words&nbsp;· One minute</small><p>HTTP和HTTPS的区别 https协议需要到ca申请证书，一般免费证书很少，需要交费。 http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议。 http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。 http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。 所以在涉及到账户、金钱等敏感信息交互的时候使用HTTPS是个不错的选择。
申请证书 申请SSL证书过程就不多说了。挺简单的，本文主要是在nginx上配置ssl证书实现https访问。 将key和证书上传到服务器。 nginx配置 server { listen 443; #listen [::]:80; server_name passport.ddhigh.com; index index.html index.htm index.php default.html default.htm default.php; root /home/wwwroot/passport.ddhigh.com; include other.conf; #error_page 404 /404.html; location ~ [^/]\.php(/|$) { # comment try_files $uri =404; to enable pathinfo try_files $uri =404; fastcgi_pass unix:/tmp/php-cgi.sock; fastcgi_index index.php; include fastcgi.conf; #include pathinfo.conf; } location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$ { expires 30d; } location ~ .*\.(js|css)?$ { expires 12h; } ssl on; ssl_certificate /root/crt/server.</div></article><article><div class=blog-card><h3><a href=/2014/10/11/ng-repeat-get-parent-index/>ng-repeat获取父级INDEX</a></h3><p><small>October 11, 2014&nbsp;· 40 words&nbsp;· One minute</small><p>angularjs的循环嵌套我就不多说了，无非是ng-repeat的嵌套而已，如果需要获取索引请使用$index。
那么问题来了，$index只能获取当前循环的索引，如果需要获取父级的索引怎么办？
原理其实也不难，在父级ng-repeat时利用ng-init写入一个变量即可，子循环是可以访问到的。
&lt;div ng-controller="MainCtrl"> &lt;dl ng-repeat="user in users"> &lt;dt ng-init="p_index=$index">Name:&lt;/dt> &lt;dd ng-repeat="p in user.posts">父级INDEX: - 自己的INDEX: &lt;/dd> &lt;/dl> &lt;/div> var site = angular.module('application.site', []); site.controller('MainCtrl', ['$scope', '$http', function ($scope, $http) { $scope.users = [ {name:"xialei",posts:["文章一","文章二","文章三"]}, {name:"zhangsan",posts:["文章四","文章五"]} ]; }]); 这里只是关键代码，用过angularjs的小伙伴们相信一眼就可以看懂了。</div></article><article><div class=blog-card><h3><a href=/2014/10/08/html5-data-api/>html5新属性data api</a></h3><p><small>October 8, 2014&nbsp;· 59 words&nbsp;· One minute</small><p>以往在做列表程序的时候，需要做类似“删除”功能的时候，往往是组装一个URL，类似于这个
index.php?m=news&amp;a=delete&amp;id=10
这是最普通的url方式来进行删除。
但是随着用户体验要求的增加，很多时候都需要使用ajax来实现相应效果。
记得很早以前在写一个CURD项目的时候，我是用ID来做的，类似于 id=&ldquo;news_id_10&rdquo;,id=&ldquo;news_id_11&rdquo; 这样，然后通过分割字符串来获取ID，简直就是要多麻烦有多麻烦，当时就在想有没有一个能自己定义所需数据的字段呢？
现在好了。HTML5的data-* API可以帮到我们
html代码 &lt;a href="javascript:void(0)" data-action="delete" data-id="10">删除&lt;/a> 是不是看到了data-action和data-id属性呢？data-只要更改就可以了，需要满足标识符约束。
js代码 $(document).on('click', '[data-action="delete"]', function() { var $id = $(this).data("id"); var $this = $(this); ajax && ajax.abort(); ajax = $.get('index.php', { id: $id, m: 'news', a: 'delete' }, function(data) { if (data.status == 1) { //操作成功 } else { alert(data.info); } }, 'json'); }); JQ提供的$.data方法确实挺方便的，但是请注意，本人发现$.data方法是只读的（就是不能改变data-id=&ldquo;10"中的10），如果需要改变，请用底层的$.attr(&lsquo;data-id&rsquo;,9)这种操作。</div></article></div><div class=paginator><a class=prev href=/categories/engineering/page/24/>&larr;&nbsp;&nbsp;Pre Page</a>
<a class=next href=/categories/engineering/page/26/>Next Page&nbsp;&nbsp;&rarr;</a></div></div></div></div><footer class=footer><p>&copy; 2014 - 2023 <a href=https://www.ddhigh.com>Lei Xia</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
<a href=https://umami-beta-peach.vercel.app/ target=_blank>Statistics</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg></a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>