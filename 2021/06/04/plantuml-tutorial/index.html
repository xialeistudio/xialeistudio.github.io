<!doctype html><html lang=zh><head><meta name=viewport content="width=device-width,initial-scale=1"><title>PlanUML指南</title>
<meta charset=utf-8><meta content="Web开发 ,Java ,Go ,Node.js ,PHP ,Koa ,MySQL ,Redis ,前端 ,后端 ,数据库" name=keywords><meta name=description content="简介 统一建模语言（英语：Unified Modeling Language，缩写 UML）是非专利的第三代建模和规约语言。UML是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法"><meta name=author content="Lei Xia"><link rel=canonical href=https://www.ddhigh.com/2021/06/04/plantuml-tutorial/><link rel=alternate type=application/rss+xml href=https://www.ddhigh.com//index.xml title=每天进步一点点><script async src="https://www.googletagmanager.com/gtag/js?id=G-EC3XLVSGKV"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EC3XLVSGKV")</script><meta property="og:title" content="PlanUML指南"><meta property="og:description" content="简介 统一建模语言（英语：Unified Modeling Language，缩写 UML）是非专利的第三代建模和规约语言。UML是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法"><meta property="og:type" content="article"><meta property="og:url" content="https://www.ddhigh.com/2021/06/04/plantuml-tutorial/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-06-04T15:17:06+00:00"><meta property="article:modified_time" content="2021-06-04T15:17:06+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="PlanUML指南"><meta name=twitter:description content="简介 统一建模语言（英语：Unified Modeling Language，缩写 UML）是非专利的第三代建模和规约语言。UML是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.ddhigh.com/posts/"},{"@type":"ListItem","position":2,"name":"PlanUML指南","item":"https://www.ddhigh.com/2021/06/04/plantuml-tutorial/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"PlanUML指南","name":"PlanUML指南","description":"简介 统一建模语言（英语：Unified Modeling Language，缩写 UML）是非专利的第三代建模和规约语言。UML是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法","keywords":[],"articleBody":"简介 统一建模语言（英语：Unified Modeling Language，缩写 UML）是非专利的第三代建模和规约语言。UML是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法\n编写UML的软件很多，但是基本是可视化的，需要手动编写，本文主要介绍基于文本的UML编写工具——PlantUML。\n安装 PlantUML有以下依赖：\ngraphviz jdk Jetbrains IDE插件(可选，本文推荐) 安装graphviz 本文使用Homebrew安装graphviz，终端执行以下命令安装graphviz。\nbrew install graphviz 安装完毕后查看版本信息。\ndot -v 输出如下：\ndot - graphviz version 2.47.0 (20210316.0004) libdir = \"/usr/local/Cellar/graphviz/2.47.0/lib/graphviz\" Activated plugin library: libgvplugin_dot_layout.6.dylib Using layout: dot:dot_layout Activated plugin library: libgvplugin_core.6.dylib Using render: dot:core Using device: dot:dot:core The plugin configuration file: /usr/local/Cellar/graphviz/2.47.0/lib/graphviz/config6 was successfully loaded. render\t: cairo dot dot_json fig gd json json0 map mp pic pov ps quartz svg tk visio vml vrml xdot xdot_json layout\t: circo dot fdp neato nop nop1 nop2 osage patchwork sfdp twopi textlayout\t: textlayout device\t: bmp canon cgimage cmap cmapx cmapx_np dot dot_json eps exr fig gd gd2 gif gv icns ico imap imap_np ismap jp2 jpe jpeg jpg json json0 mp pct pdf pic pict plain plain-ext png pov ps ps2 psd sgi svg svgz tga tif tiff tk vdx vml vmlz vrml wbmp webp xdot xdot1.2 xdot1.4 xdot_json loadimage\t: (lib) bmp eps gd gd2 gif jpe jpeg jpg pdf png ps svg webp xbm jdk 本文使用Homebrew安装openjdk即可，终端执行以下命令安装openjdk。\nbrew install openjdk 安装完毕后查看版本信息。\njava -version 输出如下：\nopenjdk version \"11.0.10\" 2021-01-19 OpenJDK Runtime Environment (build 11.0.10+9) OpenJDK 64-Bit Server VM (build 11.0.10+9, mixed mode) Jetbrains IDE插件安装 本文以Goland为例。\n打开IDE设置，打开Plugins窗口，搜索PlantUML integration\n安装完毕后重启IDE\n打开IDE设置，搜索plantuml，确保Remote rendering已关闭\nPlantUML语法 以最常用的时序图、类图、流程图、组件图举例。\n时序图 Get Started IDE新建一个空项目，打开项目之后，右键新建文件 选择Sequence PlantUML菜单项说明 以微信网页授权为例编写时序图。 @startuml 'https://plantuml.com/sequence-diagram '启用自动编号 autonumber '生命线自动激活 autoactivate on actor 用户 用户 -\u003e 应用服务器: 获取用户信息 应用服务器 -\u003e 微信服务器: 跳转授权链接:(appid,scope,callback) 微信服务器 -\u003e 用户: 请求用户授权 return 允许授权 return 返回授权code 应用服务器 -\u003e 微信服务器: 获取用户access_token(appid,secret,code) return 返回access_token+openid 应用服务器 -\u003e 微信服务器: 获取用户信息(openid,access_token) return 用户信息 return 用户信息 @enduml 渲染效果 语法说明 标记声明 @startuml和@enduml是PlantUML的开始结束标记，无需更改。 autonumber 打开启动编号，也就是每个步骤之前都有数字编号，打开之后整个流程更加清晰 autoactivate on 打开生命线自动激活，需要配合`return`使用 actor 用户 声明`用户`的类型是actor(行为人) 时序声明 使用-\u003e来声明一个时序操作，:后面可以附加消息 使用return来返回消息给调用者 声明参与者 默认情况下参与者为矩形，无法看出实际类型。实际应用中，会有数据库、消息队列等等参与者，使用以下关键字来改变参与者的图例。\nactor 用户 database 数据库 queue 消息队列 类图 类图是UML中非常重要的一种类型，能够在实际编码之前为我们提供OOP的详细设计。\nGet Started IDE新建一个空项目，打开项目之后，右键新建文件 选择Class 以一个上传类为例编写类图 @startuml 'https://plantuml.com/class-diagram namespace com.ddhigh.uploader { interface Uploader { + String Upload(String filename) Throws IOException } namespace qiniu { class QiniuUploader implements Uploader { - client: qiniu.Client -- + String Upload(String filename) Throws IOException } QiniuUploader *-- qiniu.Client } package aliyun { class AliyunUploader implements Uploader { - client: aliyun.Client -- + String Upload(String filename) Throws IOException } AliyunUploader *-- aliyun.Client } class UploaderFacade { - uploaders: List -- + List Upload(String filename) Throws IOException } UploaderFacade o-- Uploader } @enduml 渲染效果 语法说明 包 建议使用namespace关键字声明包，package声明的包内的类名必须全局唯一(无视package)，而namespace只要求该namespace内唯一即可。\nclass/interface 与实际编程语言几乎无差别，比如上面例子中采用的是java语法。\n可见性 PlantUML支持3种可见性：\n- 私有级别 private # 保护级别 protected + 公有级别 public 元素关系 PlantUML主要有以下3种关系：\n扩展: 包含implements和extends 聚合: 使用o--，左边的包含右边的 组合: 使用*--,左边的依赖右边的 组合和聚合的区别：(以上面的图为例)\n组合：QiniuUploader必须依赖Client才能提供上传功能，组合一般是1对1的。 聚合：UploadFacade可以依赖多个Uploader实例，也可以依赖0个实例(只是这时候不会有文件上传了)，聚合一般是1对多的。 流程图 在梳理复杂业务逻辑时，善用流程图能帮我们更加清晰地梳理清楚，也方便我们和其他人员进行沟通（非开发人员基本看不懂代码）。\nGet Started IDE新建一个空项目，打开项目之后，右键新建文件 新建Activity类型文件 下面以一个授权获取用户openid并插入数据库，然后查询用户好友进行消息推送的场景编写流程图 @startuml 'https://plantuml.com/activity-diagram-beta start :使用code,appid,secret请求微信服务器获取access_token和openid; :使用access_token和openid请求微信服务器获取用户信息; :查询数据库openid是否存在; if (数据库查询失败?) then (是) stop elseif (用户已存在?) then (是) :更新用户信息; else (否) :新建用户并绑定openid; endif :获取用户好友列表; while(好友列表遍历完成?) is (否) :推送消息给好友; endwhile(是) stop @enduml 渲染效果 语法说明 开始和结束: 使用start和stop\n处理语句: 使用:和;包裹该流程\n条件判断: 使用if,elseif,else,endif,then\n循环语句: 使用while,is,endwhile编写\n组件图 现阶段组件化MVVM框架大行其道，具有代表性的有Vue,React和Angular。我们可以使用组件图来绘制组件关系，简单易懂。\nGet Started IDE新建一个空项目，打开项目之后，右键新建文件 选择Component 以微信首页聊天列表为例绘制组件关系图 @startuml 'https://plantuml.com/component-diagram package widgets { [SearchBar] --\u003e [Text] [SearchBar] --\u003e [Icon] [NavigationBar] --\u003e [Text] [NavigationBar] --\u003e [Icon] [ListView] --\u003e [ListItem] [ListItem] --\u003e [Image] [ListItem] --\u003e [Text] } package routes { [Home] --\u003e [NavigationBar] [Home] --\u003e [SearchBar] [Home] --\u003e [ListView] } @enduml 渲染效果 依赖关系如下：\n首页: 导航栏, 搜索框，列表 导航栏: 文本，图标 搜索框: 文本，图标 列表: 列表项 列表项: 文本，图片 语法说明 package 声明包，同一个包内的组件是类似地位 [组件名]声明组件，组件名在单个文件内是唯一的 --\u003e 声明依赖关系，左边依赖右边 (完)\n","wordCount":"501","inLanguage":"zh","datePublished":"2021-06-04T15:17:06Z","dateModified":"2021-06-04T15:17:06Z","author":{"@type":"Person","name":"Lei Xia"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.ddhigh.com/2021/06/04/plantuml-tutorial/"},"publisher":{"@type":"Organization","name":"每天进步一点点","logo":{"@type":"ImageObject","url":"https://www.ddhigh.com/favicon.ico"}}}</script><link rel=icon href=/img/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/img/favicon.ico><link rel=manifest href=/img/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.ddf09015124d5e5e623b9acce7e8755f9f3c09d7a51a3d59ee9c0af4f906ccc9.css integrity="sha256-3fCQFRJNXl5iO5rM5+h1X588CdelGj1Z7pwK9PkGzMk=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>$darkModeInit.Content|safeJS</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>每天进步一点点
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/>首页</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>归档</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/books>出版物</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/guestbook>留言板</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/xialeistudio><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li><li class="navigation-item navigation-language"><a href=https://www.ddhigh.com/en/>EN</a></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>PlanUML指南</h1></header><p><small>2021年6月4日&nbsp;· 501 字&nbsp;· 3 分钟</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#简介>简介</a></li><li><a href=#安装>安装</a><ul><li><a href=#安装graphviz>安装graphviz</a></li><li><a href=#jdk>jdk</a></li><li><a href=#jetbrains-ide插件安装>Jetbrains IDE插件安装</a></li></ul></li><li><a href=#plantuml语法>PlantUML语法</a><ul><li><a href=#时序图>时序图</a></li><li><a href=#类图>类图</a></li><li><a href=#流程图>流程图</a></li><li><a href=#组件图>组件图</a></li></ul></li></ul></nav></div><section class=blog-content><h2 id=简介>简介</h2><blockquote><p><strong>统一建模语言</strong>（英语：Unified Modeling Language，缩写 UML）是非专利的第三代<a href="https://zh.wikipedia.org/w/index.php?title=%e5%af%b9%e8%b1%a1%e5%bb%ba%e6%a8%a1%e8%af%ad%e8%a8%80&amp;action=edit&amp;redlink=1" target=_blank rel=noopener>建模</a>和<a href=https://zh.wikipedia.org/wiki/%e8%a7%84%e7%ba%a6%e8%af%ad%e8%a8%80 target=_blank rel=noopener>规约语言</a>。UML是一种开放的方法，用于说明、可视化、构建和编写一个正在开发的、面向对象的、软件密集系统的制品的开放方法</p></blockquote><p>编写UML的软件很多，但是基本是可视化的，需要手动编写，本文主要介绍基于文本的UML编写工具——PlantUML。</p><h2 id=安装>安装</h2><p>PlantUML有以下依赖：</p><ol><li>graphviz</li><li>jdk</li><li>Jetbrains IDE插件(可选，本文推荐)</li></ol><h3 id=安装graphviz>安装graphviz</h3><p>本文使用<code>Homebrew</code>安装<code>graphviz</code>，终端执行以下命令安装<code>graphviz</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install graphviz
</span></span></code></pre></div><p>安装完毕后查看版本信息。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dot -v
</span></span></code></pre></div><p>输出如下：</p><pre tabindex=0><code>dot - graphviz version 2.47.0 (20210316.0004)
libdir = &#34;/usr/local/Cellar/graphviz/2.47.0/lib/graphviz&#34;
Activated plugin library: libgvplugin_dot_layout.6.dylib
Using layout: dot:dot_layout
Activated plugin library: libgvplugin_core.6.dylib
Using render: dot:core
Using device: dot:dot:core
The plugin configuration file:
	/usr/local/Cellar/graphviz/2.47.0/lib/graphviz/config6
		was successfully loaded.
 render	:  cairo dot dot_json fig gd json json0 map mp pic pov ps quartz svg tk visio vml vrml xdot xdot_json
 layout	:  circo dot fdp neato nop nop1 nop2 osage patchwork sfdp twopi
 textlayout	:  textlayout
 device	:  bmp canon cgimage cmap cmapx cmapx_np dot dot_json eps exr fig gd gd2 gif gv icns ico imap imap_np ismap jp2 jpe jpeg jpg json json0 mp pct pdf pic pict plain plain-ext png pov ps ps2 psd sgi svg svgz tga tif tiff tk vdx vml vmlz vrml wbmp webp xdot xdot1.2 xdot1.4 xdot_json
 loadimage	:  (lib) bmp eps gd gd2 gif jpe jpeg jpg pdf png ps svg webp xbm
</code></pre><h3 id=jdk>jdk</h3><p>本文使用<code>Homebrew</code>安装<code>openjdk</code>即可，终端执行以下命令安装<code>openjdk</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install openjdk
</span></span></code></pre></div><p>安装完毕后查看版本信息。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>java -version
</span></span></code></pre></div><p>输出如下：</p><pre tabindex=0><code>openjdk version &#34;11.0.10&#34; 2021-01-19
OpenJDK Runtime Environment (build 11.0.10+9)
OpenJDK 64-Bit Server VM (build 11.0.10+9, mixed mode)
</code></pre><h3 id=jetbrains-ide插件安装>Jetbrains IDE插件安装</h3><p>本文以<code>Goland</code>为例。</p><ol><li><p>打开IDE设置，打开<code>Plugins</code>窗口，搜索<code>PlantUML integration</code></p></li><li><p>安装完毕后重启IDE</p></li><li><p>打开IDE设置，搜索<code>plantuml</code>，确保<code>Remote rendering</code>已关闭</p></li></ol><p><img alt=image-20210604154007098 src=https://static.ddhigh.com/blog//2021/06/04/1622792407142095000.png></p><h2 id=plantuml语法>PlantUML语法</h2><p>以最常用的时序图、类图、流程图、组件图举例。</p><h3 id=时序图>时序图</h3><h4 id=get-started>Get Started</h4><ol><li>IDE新建一个空项目，打开项目之后，右键新建文件</li></ol><p><img alt=image-20210604152912197 src=https://static.ddhigh.com/blog//2021/06/04/1622791752260150000.png></p><ol start=2><li>选择<code>Sequence</code></li></ol><p><img alt=image-20210604152935751 src=https://static.ddhigh.com/blog//2021/06/04/1622791775795758000.png></p><ol start=3><li>PlantUML菜单项说明</li></ol><p><img alt=image-20210604155009752 src=https://static.ddhigh.com/blog//2021/06/04/1622793009802684000.png></p><ol start=4><li>以微信网页授权为例编写时序图。</li></ol><pre tabindex=0><code>@startuml
&#39;https://plantuml.com/sequence-diagram

&#39;启用自动编号
autonumber
&#39;生命线自动激活
autoactivate on

actor 用户

用户 -&gt; 应用服务器: 获取用户信息
应用服务器 -&gt; 微信服务器: 跳转授权链接:(appid,scope,callback)
微信服务器 -&gt; 用户: 请求用户授权
return 允许授权
return 返回授权code
应用服务器 -&gt; 微信服务器: 获取用户access_token(appid,secret,code)
return 返回access_token+openid
应用服务器 -&gt; 微信服务器: 获取用户信息(openid,access_token)
return 用户信息
return 用户信息

@enduml
</code></pre><ol start=5><li>渲染效果</li></ol><p><img alt=image-20210604153910674 src=https://static.ddhigh.com/blog//2021/06/04/1622792350734661000.png></p><h4 id=语法说明>语法说明</h4><h5 id=标记声明>标记声明</h5><pre tabindex=0><code>@startuml和@enduml是PlantUML的开始结束标记，无需更改。
autonumber 打开启动编号，也就是每个步骤之前都有数字编号，打开之后整个流程更加清晰
autoactivate on 打开生命线自动激活，需要配合`return`使用
actor 用户 声明`用户`的类型是actor(行为人)
</code></pre><h5 id=时序声明>时序声明</h5><ul><li>使用<code>-></code>来声明一个时序操作，<code>:</code>后面可以附加消息</li><li>使用<code>return</code>来返回消息给调用者</li></ul><h5 id=声明参与者>声明参与者</h5><p>默认情况下参与者为矩形，无法看出实际类型。实际应用中，会有数据库、消息队列等等参与者，使用以下关键字来改变参与者的图例。</p><pre tabindex=0><code>actor 用户
database 数据库
queue 消息队列
</code></pre><p><img alt=image-20210604154840162 src=https://static.ddhigh.com/blog//2021/06/04/1622792920216896000.png></p><h3 id=类图>类图</h3><p>类图是UML中非常重要的一种类型，能够在实际编码之前为我们提供OOP的详细设计。</p><h4 id=get-started-1>Get Started</h4><ol><li>IDE新建一个空项目，打开项目之后，右键新建文件</li></ol><p><img alt=image-20210604152912197 src=https://static.ddhigh.com/blog//2021/06/04/1622791752260150000.png></p><ol start=2><li>选择<code>Class</code></li></ol><p><img alt=image-20210604155301322 src=https://static.ddhigh.com/blog/2021/06/04/1622793181374871000.png></p><ol start=3><li>以一个上传类为例编写类图</li></ol><pre tabindex=0><code>@startuml
&#39;https://plantuml.com/class-diagram

namespace com.ddhigh.uploader {
 interface Uploader {
  + String Upload(String filename) Throws IOException
 }

 namespace qiniu {
  class QiniuUploader implements Uploader {
- client: qiniu.Client
--
+ String Upload(String filename) Throws IOException
  }
  QiniuUploader *-- qiniu.Client
 }

 package aliyun {
  class AliyunUploader implements Uploader {
- client: aliyun.Client
--
+ String Upload(String filename) Throws IOException
  }
  AliyunUploader *-- aliyun.Client
 }

 class UploaderFacade {
  - uploaders: List&lt;Uploader&gt;
  --
  + List&lt;String&gt; Upload(String filename) Throws IOException
 }
 UploaderFacade o-- Uploader
}

@enduml
</code></pre><ol start=4><li>渲染效果</li></ol><p><img alt=image-20210604155821009 src=https://static.ddhigh.com/blog/2021/06/04/1622793501066543000.png></p><h5 id=语法说明-1>语法说明</h5><h5 id=包>包</h5><p>建议使用<code>namespace</code>关键字声明包，<code>package</code>声明的包内的类名必须全局唯一(无视package)，而<code>namespace</code>只要求该<code>namespace</code>内唯一即可。</p><h5 id=classinterface>class/interface</h5><p>与实际编程语言几乎无差别，比如上面例子中采用的是java语法。</p><h5 id=可见性>可见性</h5><p>PlantUML支持3种可见性：</p><ul><li><code>-</code> 私有级别 <code>private</code></li><li><code>#</code> 保护级别 <code>protected</code></li><li><code>+</code> 公有级别 <code>public</code></li></ul><h5 id=元素关系>元素关系</h5><p>PlantUML主要有以下3种关系：</p><ol><li>扩展: 包含<code>implements</code>和<code>extends</code></li><li>聚合: 使用<code>o--</code>，<code>左边</code>的包含<code>右边</code>的</li><li>组合: 使用<code>*--</code>,<code>左边</code>的依赖<code>右边</code>的</li></ol><blockquote><p>组合和聚合的区别：(以上面的图为例)</p><ol><li>组合：QiniuUploader必须依赖Client才能提供上传功能，组合一般是1对1的。</li><li>聚合：UploadFacade可以依赖多个Uploader实例，也可以依赖0个实例(只是这时候不会有文件上传了)，聚合一般是1对多的。</li></ol></blockquote><h3 id=流程图>流程图</h3><p>在梳理复杂业务逻辑时，善用流程图能帮我们更加清晰地梳理清楚，也方便我们和其他人员进行沟通（非开发人员基本看不懂代码）。</p><h4 id=get-started-2>Get Started</h4><ol><li>IDE新建一个空项目，打开项目之后，右键新建文件</li></ol><p><img alt=image-20210604152912197 src=https://static.ddhigh.com/blog//2021/06/04/1622791752260150000.png></p><ol start=2><li>新建<code>Activity</code>类型文件</li></ol><p><img alt=image-20210604160929588 src=https://static.ddhigh.com/blog/2021/06/04/1622794169645334000.png></p><ol start=3><li>下面以一个<code>授权获取用户openid并插入数据库，然后查询用户好友进行消息推送</code>的场景编写流程图</li></ol><pre tabindex=0><code>@startuml
&#39;https://plantuml.com/activity-diagram-beta

start
:使用code,appid,secret请求微信服务器获取access_token和openid;
:使用access_token和openid请求微信服务器获取用户信息;
:查询数据库openid是否存在;
if (数据库查询失败?) then (是)
stop
elseif (用户已存在?) then (是)
:更新用户信息;
else (否)
:新建用户并绑定openid;
endif

:获取用户好友列表;
while(好友列表遍历完成?) is (否)
:推送消息给好友;
endwhile(是)
stop

@enduml
</code></pre><ol start=4><li>渲染效果</li></ol><p><img alt=image-20210604161522881 src=https://static.ddhigh.com/blog/2021/06/04/1622794522917043000.png></p><h4 id=语法说明-2>语法说明</h4><ul><li><p>开始和结束: 使用<code>start</code>和<code>stop</code></p></li><li><p>处理语句: 使用<code>:</code>和<code>;</code>包裹该流程</p></li><li><p>条件判断: 使用<code>if</code>,<code>elseif</code>,<code>else</code>,<code>endif</code>,<code>then</code></p></li><li><p>循环语句: 使用<code>while</code>,<code>is</code>,<code>endwhile</code>编写</p></li></ul><h3 id=组件图>组件图</h3><p>现阶段组件化MVVM框架大行其道，具有代表性的有<code>Vue</code>,<code>React</code>和<code>Angular</code>。我们可以使用组件图来绘制组件关系，简单易懂。</p><h5 id=get-started-3>Get Started</h5><ol><li>IDE新建一个空项目，打开项目之后，右键新建文件</li></ol><p><img alt=image-20210604152912197 src=https://static.ddhigh.com/blog//2021/06/04/1622791752260150000.png></p><ol start=2><li>选择<code>Component</code></li></ol><p><img alt=image-20210604162020830 src=https://static.ddhigh.com/blog/2021/06/04/1622794820895677000.png></p><ol start=3><li>以微信首页聊天列表为例绘制组件关系图</li></ol><pre tabindex=0><code>@startuml
&#39;https://plantuml.com/component-diagram

package widgets {
 [SearchBar] --&gt; [Text]
 [SearchBar] --&gt; [Icon]
 [NavigationBar] --&gt; [Text]
 [NavigationBar] --&gt; [Icon]
 
 [ListView] --&gt; [ListItem]
 [ListItem] --&gt; [Image]
 [ListItem] --&gt; [Text]
}

package routes {
 [Home] --&gt; [NavigationBar]
 [Home] --&gt; [SearchBar]
 [Home] --&gt; [ListView]
}


@enduml
</code></pre><ol start=4><li>渲染效果</li></ol><p><img alt=image-20210604162521451 src=https://static.ddhigh.com/blog/2021/06/04/1622795518286015000.png></p><blockquote><p>依赖关系如下：</p><ul><li>首页: 导航栏, 搜索框，列表</li><li>导航栏: 文本，图标</li><li>搜索框: 文本，图标</li><li>列表: 列表项</li><li>列表项: 文本，图片</li></ul></blockquote><h5 id=语法说明-3>语法说明</h5><ul><li>package 声明包，同一个包内的组件是类似地位</li><li><code>[组件名]</code>声明组件，<code>组件名</code>在单个文件内是唯一的</li><li><code>--></code> 声明依赖关系，<code>左边</code>依赖<code>右边</code></li></ul><p>(完)</p><div class=blog-footer><div class=copyright><ul><li style=margin-bottom:.5em>本文作者: <a href=https://ddhigh.com/ target=_blank style=color:#000;text-decoration:none>xialeistudio</a></li><li style=margin-bottom:.5em>本文链接: <a href=https://www.ddhigh.com/2021/06/04/plantuml-tutorial/ target=_blank style=color:#000;text-decoration:none>PlanUML指南</a></li><li>版权声明: <a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank style=color:#000;text-decoration:none>「署名-非商业性使用-相同方式共享 4.0 国际」</a></li></ul></div><div style=margin-top:2rem><img src=/img/mp.png alt=qrcode></div></div></section><div class=paginator><a class=prev href=https://www.ddhigh.com/2021/09/18/gomonkey-private-method-stub/><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>gomonkey私有方法打桩</span></a>
<a class=next href=https://www.ddhigh.com/2021/03/17/golang-function/><span>Golang程序设计——函数</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div><div class=comments><script>const getTheme=window.localStorage&&window.localStorage.getItem("theme");let theme=getTheme==="dark"?"dark":"light",s=document.createElement("script");s.src="https://giscus.app/client.js",s.setAttribute("data-repo","xialeistudio/discussion"),s.setAttribute("data-repo-id","R_kgDOKurTRA"),s.setAttribute("data-category","General"),s.setAttribute("data-category-id","DIC_kwDOKurTRM4CbCJt"),s.setAttribute("data-mapping","pathname"),s.setAttribute("data-strict","0"),s.setAttribute("data-reactions-enabled","1"),s.setAttribute("data-emit-metadata","0"),s.setAttribute("data-input-position","bottom"),s.setAttribute("data-theme",theme),s.setAttribute("data-lang","en"),s.setAttribute("data-loading","lazy"),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div></article></div><footer class=footer><p>&copy; 2014 - 2024 <a href=https://www.ddhigh.com/>每天进步一点点</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>