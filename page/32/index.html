<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.123.8"><meta name=viewport content="width=device-width,initial-scale=1"><title>Lei Xia</title>
<meta charset=utf-8><meta name=description content="Ladder@Learning & Writing & Sharing"><meta name=author content="Lei Xia"><link rel=canonical href=https://www.ddhigh.com/><link rel=alternate type=application/rss+xml href=https://www.ddhigh.com//index.xml title="Lei Xia"><script async defer data-website-id=865c8529-0729-4cf5-88a9-448616abbcbb src=https://umami-beta-peach.vercel.app/xialeistudio></script><meta property="og:title" content="Lei Xia"><meta property="og:description" content="Learning & Writing & Sharing"><meta property="og:type" content="website"><meta property="og:url" content="https://www.ddhigh.com/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lei Xia"><meta name=twitter:description content="Learning & Writing & Sharing"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Lei Xia","url":"https://www.ddhigh.com/","description":"Learning \u0026amp; Writing \u0026amp; Sharing","thumbnailUrl":"https://www.ddhigh.com/favicon.ico","sameAs":[]}</script><link rel=icon href=/img/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/img/favicon.ico><link rel=manifest href=/img/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.5dd042a107aa191c819948e5648b04844bec5bdd365fdcf2b880177ce3d89b79.css integrity="sha256-XdBCoQeqGRyBmUjlZIsEhEvsW902X9zyuIAXfOPYm3k=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/books>Books</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/guestbook>Guestbook</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/xialeistudio><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><div class=home><div class=info><div class=intro><h1>Lei Xia</h1><small>Sr. Software Engineer | Solution Architect</small><p><p>Writing code, Enjoying life, Building future</p><p><a href=/atom.xml target=_blank rel=noopener>RSS</a> ·
<a href=/sponsors target=_blank rel=noopener>Sponsor</a></p></p></div></div></div><div class=blog-wrapper><div><div class=blog-list><article><div class=blog-card><h3><a href=/2014/09/06/bower-get-started/>bower快速入门</a></h3><p><small>September 6, 2014&nbsp;· 47 words&nbsp;· One minute</small><p>简介 bower是twitter的又一个开源项目，使用nodejs开发，用于web包管理。如果越来越多得开源项目都托管在github上，bower只需要将github上项目加上一个配置文件既可以使用bower方式使用安装包。作为包管理，bower能提供添加新web包，更新web包，删除web包，发布web包功能，管理包依赖。web包通常认为由html+css+javascript构成。
安装bower npm install bower -g 请确保你有Nodejs环境
在项目目录中运行
bower install jquery 运行成功之后项目中会多出components文件夹，文件夹中jquery文件夹，jquery文件夹里面就有最新的jquery文件。
这还不能说明他NB的地方，试想下面的场景，jQuery升级了，是不是再down一次jQuery呢？bower可以这样做：
bower update jquery 就可以自动升级到最新版的jquery了。
再假设我们需要使用bootstrap，bootstrap可不是一个文件，有css,js还有图片。js还依赖于jQuery，如果使用bower：
bower install bootstrap bower会自动从github上down最新的代码，而且，会自动将依赖包jquery也down一次。
如果你发布程序的时候不想把一些依赖的库发布上去（主要原因是太大了 - - ），可以在项目根目录下生成一个 bower.json 文件用来管理依赖。
在项目目录下执行
bower init 按照提示操作就好，这样子会生成一个bower文件
安装 jquery
bower install jquery --save 这样子 bower.json 文件就会写入一个 Jquery的依赖项
别人只要在项目目录下输入
bower install 就会自动安装了</div></article><article><div class=blog-card><h3><a href=/2014/09/06/php-cors-crossdomain/>php使用CORS实现跨域请求</a></h3><p><small>September 6, 2014&nbsp;· 15 words&nbsp;· One minute</small><p>js跨域的解决方法，一百度一大堆，不过都是jsonp为主，这种解决方法只适用于GET请求。POST跨域的话需要在HTTP协议上下功夫。
基础知识 主要会用到以下几个响应头
Access-Control-Allow-Origin：允许哪些url可以跨域请求到本域 Access-Control-Allow-Methods:允许的请求方法，一般是GET,POST,PUT,DELETE,OPTIONS Access-Control-Max-Age：表明在该时间段内不再“预检”允许的请求方法（相当于缓存），即不以OPTIONS方法进行请求 Access-Control-Allow-Headers：允许哪些请求头可以跨域 php代码 &lt;?php header('Access-Control-Allow-Origin:*'); header('Access-Control-Allow-Methods:POST'); header('Access-Control-Max-Age:60'); header('Access-Control-Allow-Headers:x-requested-with,content-type'); header('Content-Type:application/json;charset=utf-8'); print_r(file_get_contents('php://input'));</div></article><article><div class=blog-card><h3><a href=/2014/09/06/aliyun-phpmailer/>阿里云ECS服务器phpmailer发信失败解决方法</a></h3><p><small>September 6, 2014&nbsp;· 24 words&nbsp;· One minute</small><p>phpmailer之前一直在用，一般都是采用smtp登录服务器的方式进行发信，今天在本地windows主机测试也能发信成功，但是到线上去就不行了，提示“连接smtp服务器失败”。 首先可以排除的是代码方面的错误，那么剩下就知道服务器的问题了。
根据这个错误，可以想到有几种问题:
服务器ping不通，做Ping测试的时候是通的 服务器端口没开，用telnet测试的时候也是这样的 后来在服务器上用php代码测试163邮箱发现可以发信，但是腾讯的就不行，看了下邮箱配置发现是SSL的问题，然后在服务器上输出phpinfo()发现没有openssl扩展。
接下来就是安装扩展了。
首先进到php的源码包，前往ext/openssl目录 执行 phpize 这个会自动配置 然后执行 ./configure --with-openssl -with-php-config=/usr/local/php/bin/php-config make make install 这里模块安装就完成了，但是需要编辑 /etc/php.ini加上
extension=openssl.so 重启 web 服务器就可以了。经过测试，服务器上SSL发信也能成功进行</div></article><article><div class=blog-card><h3><a href=/2014/09/06/nginx-virtual-host/>nginx虚拟主机配置</a></h3><p><small>September 6, 2014&nbsp;· 71 words&nbsp;· One minute</small><p>最近服务器上用的环境是lnmp，之前一直在用apache，配置虚拟主机也是很方便的。今天查资料发现Nginx的虚拟主机配置更加简单。
server { listen 80; server_name domain1; location / { root html/domain1; index index.html index.htm index.php; } location ~ \.php$ { root html/domain1; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } } server { listen 80; server_name domain2; location / { root html/domain2; index index.html index.htm index.php; } location ~ \.php$ { root html/domain2; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } } 保存之后，执行
nginx -s reload</div></article><article><div class=blog-card><h3><a href=/2014/09/06/yii-multi-user/>Yii同一站点配置多个用户角色</a></h3><p><small>September 6, 2014&nbsp;· 18 words&nbsp;· One minute</small><p>Yii是基于组件的PHP MVC框架，yii的用户组件调用很方便，但是如果有遇到一个站点有多种用户的时候，如前台用户，后台用户，就需要增加User组件了。
简单来说，就是新建一个用户类去继承 CWebUser类，比如
WebUser继承CWebUser，配置文件在components中增加
'user'=>array( 'class'=>'WebUser' ) 以上就创建了一个前台用户,调用方式 Yii::app()->user
后台用户可以这么写
AdminUser继承CWebUser,配置文件在components中增加
'admin'=>array( 'class'=>'AdminUser' ) 这样就创建了一个后台用户，调用方式 Yii::app()->admin
这种方法是本人所知最科学的，比用session来区分好多了。毕竟很多时候，能用框架现有的方法就用框架的方法。</div></article><article><div class=blog-card><h3><a href=/2014/09/06/angularjs-load-remote-data-on-directive/>Angularjs指令数据远程请求的处理</a></h3><p><small>September 6, 2014&nbsp;· 57 words&nbsp;· One minute</small><p>假设有一个指令用来根据IP地址进行地位，获取实际地址。
首先，我们的IP地址是由后台PHP程序返回的，这里需要一个Http请求，使用了Http请求就会有类似回调的问题，之前想了各种办法，死活拿不到数据，后来去ng官网看了下，需要使用ngModel，这个是双向绑定。
指令代码 app.directive('location', ['ApiService', function (ApiService) { return { restrict: 'A', require:'ngModel', link: function (scope, ele, attrs,ngModel) { ele.addClass('opt'); ele.bind('click', function () { ele.text('定位中...'); ApiService.location(ngModel.$viewValue).success(function (data) { ele.text(data.country + ' ' + data.region + ' ' + data.city + ' ' + data.isp); }); }); } }; }]); HTML部分 &lt;span location ng-model="user.login_ip">定位&lt;/span> JS中的ngModel 会去搜索该指令的元素上的ng-model指令，这里会搜索到一个user.login_ip 的model,然后JS中使用ngModel.$viewValue 就可以拿到值了。</div></article><article><div class=blog-card><h3><a href=/2014/09/06/angularjs-autosave-directive/>Angularjs自动保存指令</a></h3><p><small>September 6, 2014&nbsp;· 66 words&nbsp;· One minute</small><p>angularjs的指令真是好东西，也是精髓。刚才群里面有朋友在问如何在用户离开编辑区域时提醒保存，其实用指令实现很简单的。
请注意，这里使用的指令标签为ajax-submit
app.directive('ajaxSubmit', [ '$http', function($http) { return { link: function(scope, ele, attrs) { var old = ele.val(); ele.bind('blur', function() { var url = ele.data('url'); var val = ele.val(); ele.prop('disabled', true); //发送http $http.post(url, { data: val }).success(function(data) { ele.prop('disabled', false); if (data.msg != undefined) { old = val; ele.after('操作成功'); setTimeout(function() { ele.next().remove(); }, 1000); } else { alert(data.error); } }); }); } } } ]); 关键是利用指令的link函数获取包装后的jq元素，然后给该元素进行事件绑定，其实很多的事件绑定都是这样做的。事件处理函数中的业务逻辑各位看官可以自行修改~。</div></article><article><div class=blog-card><h3><a href=/2014/09/06/pdo-get-started/>PDO简明教程，是时候抛弃mysql_*函数了</a></h3><p><small>September 6, 2014&nbsp;· 69 words&nbsp;· One minute</small><p>mysql_*系列函数我一之前一直在用，基于性能、安全性等原因，再加上PHP面向对象的增强，是时候使用PDO来处理数据了。PDO一个很重要的特点是该类与数据库无关，不同的数据库只是在实例化时传入的参数不同，但是操作方法是一样的。
&lt;?php try { $pdo = new PDO('mysql:host=localhost;dbname=test','root','root'); //查询数据 $stmt = $pdo->prepare('SELECT * FROM user WHERE sex=?'); $sex = 'male'; $stmt->bindParam(1,$sex); $stmt->setFetchMode(PDO::FETCH_ASSOC); $list = $stmt->fetchAll(); //查询完毕 //写入数据 $stmt = $pdo->prepare('INSERT INTO user VALUES (?,?,?)'); $username = 'admin'; $password = md5('111111'); $sex = 'male'; $stmt->bindParam(1,$username); $stmt->bindParam(2,$password); $stmt->bindParam(3,$sex); $stmt->execute(); //写入完毕 } catch (Exception $e) { echo $e->getMessage(); } 编辑、更新、删除统称为写入操作，大家可以举一反三~
execute会返回受影响的函数，有可能为0行!请大家在判断时用 === 而不是 == , 0 == false 而 0 !== false</div></article><article><div class=blog-card><h3><a href=/2014/09/06/php-chinese-reverse/>php中文字符串反转</a></h3><p><small>September 6, 2014&nbsp;· 50 words&nbsp;· One minute</small><p>php strrev() 函数能实现字符串反转，但是不支持中文，利用mb_系列函数可以进行中文字符串反转。
/** * 中文字符串反转 * @param $str * @param string $charset * @return string */ function reverse($str, $charset = 'UTF-8') { $ret = ''; $len = mb_strlen($str, $charset); for ($i = 0; $i &lt; $len; $i++) { $ret[] = mb_substr($str, $i, 1, $charset); } return implode('', array_reverse($ret)); }</div></article><article><div class=blog-card><h3><a href=/2014/09/06/redis-get-started/>Redis初探</a></h3><p><small>September 6, 2014&nbsp;· 44 words&nbsp;· One minute</small><p>Redis是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。从2010年3月15日起，Redis的开发工作由VMware主持。 我本地的PHP是 5.4.25 ts版本，这里是php_redis扩展（只限于5.4.x TS版本）。
ext.zip
打开php.ini
添加以下两行
extension=php_igbinary.dll extension=php_redis.dll 请注意顺序！
重启web服务器就可以了。
示例代码
&lt;?php $redis = new Redis(); $redis->connect('127.0.0.1'); //存储一个值 $redis->set('name', 'zhangsan', 5); //存储多个值 $array = array( 'name' => '张三', 'sex' => 'male', 'age' => 10 ); $array_get=array( 'name','sex','age' ); $redis->mset($array); print_r($redis->mget($array_get)); 本文只起到抛砖引玉的作用，详细的使用有待大家挖掘~</div></article></div><div class=paginator><a class=prev href=/page/31/>&larr;&nbsp;&nbsp;Pre Page</a>
<a class=next href=/page/33/>Next Page&nbsp;&nbsp;&rarr;</a></div></div></div></div><footer class=footer><p>&copy; 2014 - 2024 <a href=https://www.ddhigh.com/>Lei Xia</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
<a href=https://umami-beta-peach.vercel.app/ target=_blank>Statistics</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>