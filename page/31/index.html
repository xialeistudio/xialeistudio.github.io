<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.123.8"><meta name=viewport content="width=device-width,initial-scale=1"><title>Lei Xia</title>
<meta charset=utf-8><meta name=description content="Ladder@Learning & Writing & Sharing"><meta name=author content="Lei Xia"><link rel=canonical href=https://www.ddhigh.com/><link rel=alternate type=application/rss+xml href=https://www.ddhigh.com//index.xml title="Lei Xia"><meta property="og:title" content="Lei Xia"><meta property="og:description" content="Learning & Writing & Sharing"><meta property="og:type" content="website"><meta property="og:url" content="https://www.ddhigh.com/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Lei Xia"><meta name=twitter:description content="Learning & Writing & Sharing"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"Lei Xia","url":"https://www.ddhigh.com/","description":"Learning \u0026amp; Writing \u0026amp; Sharing","thumbnailUrl":"https://www.ddhigh.com/favicon.ico","sameAs":[]}</script><link rel=icon href=/img/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/img/favicon.ico><link rel=manifest href=/img/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.5dd042a107aa191c819948e5648b04844bec5bdd365fdcf2b880177ce3d89b79.css integrity="sha256-XdBCoQeqGRyBmUjlZIsEhEvsW902X9zyuIAXfOPYm3k=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives>Archive</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/books>Books</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/guestbook>Guestbook</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/xialeistudio><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li class="navigation-item navigation-dark"><button id=mode type=button aria-label="toggle user light or dark theme">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span>
<span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></li></ul></section></nav><div id=content><div class=home><div class=info><div class=intro><h1>Lei Xia</h1><small>Sr. Software Engineer | Solution Architect</small><p><p>Writing code, Enjoying life, Building future</p><p><a href=/atom.xml target=_blank rel=noopener>RSS</a> ·
<a href=/sponsors target=_blank rel=noopener>Sponsor</a></p></p></div></div></div><div class=blog-wrapper><div><div class=blog-list><article><div class=blog-card><h3><a href=/2014/09/13/linux-delete-messy-code-file/>Linux删除乱码文件</a></h3><p><small>September 13, 2014&nbsp;· 19 words&nbsp;· One minute</small><p>shell终端中有时候中文文件名会出现乱码，导致很多操作都不能进行，一个最简单的就是删除了。
linux中每个文件有类似于ID的东西，使用以下命令查看
ll -i 显示出来的第一个数字就是文件的inum
可以利用以下命令进行删除操作,假设inum为111111
find . -inum 11111 -exec rm -f {} \ rm -f {}可以自行替换为自己需要操作的命令。 这样的话，不管什么文件都可以操作，只要有inum!</div></article><article><div class=blog-card><h3><a href=/2014/09/13/mysql-combined-primary-key/>MySQL联合主键</a></h3><p><small>September 13, 2014&nbsp;· 45 words&nbsp;· One minute</small><p>单字段主键 MySQL单字段主键相信大家都熟悉了。就是以一个字段主要数据行的主键，比如下面这个表
create table `user`( user_id int(11) auto_increment, username varchar(24), password char(32), primary key(user_id) ); user_id作为单字段主键,说明任何用户的user_id都不能相同，一个user_id即标识一个用户。
多字段联合主键 再看这个表
create table `user`( username varchar(24), password char(32), email varchar(40), primary key(username,email) ); 这里使用username,email作为联合主键，为了标识一个用户，只有在username和email共同存在，且不同时才能标识。
例子 username password email zhangsan 111111 zhangsan@qq.com zhangsan 111111 lisi@qq.com lisi 111111 zhangsan@qq.com 这三条记录均为合法记录，多字段联合主键的核心就是（所有字段才能唯一确定一条记录，就像上面的username,email）。</div></article><article><div class=blog-card><h3><a href=/2014/09/13/php-regex-chinese/>PHP正则表达式匹配中文</a></h3><p><small>September 13, 2014&nbsp;· 54 words&nbsp;· One minute</small><p>正常的正则表达式匹配英文和数字以及一些常用字符还是很简单的，如
/^\w$/ /^[0-9]$/ /^[\-\_]$/ 等等，但是匹配中文的话就有些麻烦了。UTF-8的中文根据unicode编码，所以我们需要手动构造UTF-8字符串
/^[\x{4e00}-\x{9fa5}]$/u 请注意大括号，因为没有大括号PHP会报错
Warning: preg_match() [function.preg-match]: Compilation failed: PCRE does not support \L, \l, \N, \U, or \u at offset 3 in test.php on line 3 因为\x是表示十六进制数的，所以需要用大括号括起来
另外，需要增加 u 修饰符。
此修正符启用了一个 PCRE 中与 Perl 不兼容的额外功能。模式字符串被当成 UTF-8。
本修正符在 Unix 下自 PHP 4.1.0 起可用，在 win32 下自 PHP 4.2.3 起可用。
很多时候google的作用确实比 X度 大，学会google吧！</div></article><article><div class=blog-card><h3><a href=/2014/09/10/nginx-urlrewritepathinfo/>nginx url重写和pathinfo配置</a></h3><p><small>September 10, 2014&nbsp;· 127 words&nbsp;· One minute</small><p>nginx近年来的上涨趋势确实挺快的，但是apache作为老牌HTTP服务器，拥有的生态圈是nginx比不上的。一个最简单的例子，URL重写，apache的话利用无所不能的.htaccess文件就可以了。nginx还要改主配置文件。
URL重写配置 主配置文件 location / { if (!-e $request_filename) { rewrite ^/(.*)$ /index.php?$1 last; } } if和(中间要有括号,url重写这里就配置完了。
pathinfo配置 nginx原生是不支持pathinfo的，但是通过配置fastcgi参数可以达到效果
主配置文件 location ~ [^/]\.php(/|$) { # comment try_files $uri =404; to enable pathinfo #try_files $uri =404; fastcgi_pass unix:/tmp/php-cgi.sock; fastcgi_index index.php; include fastcgi.conf; include pathinfo.conf; } fastcgi.conf fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_param QUERY_STRING $query_string; fastcgi_param REQUEST_METHOD $request_method; fastcgi_param CONTENT_TYPE $content_type; fastcgi_param CONTENT_LENGTH $content_length; fastcgi_param SCRIPT_NAME $fastcgi_script_name; fastcgi_param REQUEST_URI $request_uri; fastcgi_param DOCUMENT_URI $document_uri; fastcgi_param DOCUMENT_ROOT $document_root; fastcgi_param SERVER_PROTOCOL $server_protocol; fastcgi_param HTTPS $https if_not_empty; fastcgi_param GATEWAY_INTERFACE CGI/1.</div></article><article><div class=blog-card><h3><a href=/2014/09/07/php-oop-getter-setter/>php OOP中的__get和__set方法</a></h3><p><small>September 7, 2014&nbsp;· 75 words&nbsp;· One minute</small><p>__get,__set光看前面两个下划线就知道是魔术方法了，而且还是PHP OOP中比较重要的方法。
先看一段代码
&lt;?php class Account{ private $user = 1; private $pwd = 2; } $a = new Account(); echo $a->user; $a->name = 5; echo $a->name; echo $a->big; 运行这段代码结果是肯定会报错的！
原因在于，不能访问私有属性user。利用__get和__set改进下这个类
&lt;?php class Account{ private $user = 1; private $pwd = 2; public function __set($name,$value){ $this->name = $value; } public function __get($name){ if(!isset($this->name)){ $this->name = '这是默认值'; } return $this->name; } } $a = new Account(); echo $a->user; $a->name = 5; echo $a->name; echo $a->big; 运行之后就不会报错了。</div></article><article><div class=blog-card><h3><a href=/2014/09/06/angularjs-lazy-load/>摆脱jquery!angularjs利用指令简单实现滚动翻页</a></h3><p><small>September 6, 2014&nbsp;· 80 words&nbsp;· One minute</small><p>移动开发一个很重要的问题是翻页操作，而现在的主流都是滚动翻页，以往都是用jquery的插件进行实现。用了angularjs之后，要逐步减轻对jquery的依赖。
滚动翻页基本原理就是判断scrollTop和offsetHeight之和 大于等于 scrollHeight
代码 指令 app.directive('whenScrolled', function() { return function(scope, elm, attr) { var raw = elm[0]; elm.bind('scroll', function() { if (raw.scrollTop+raw.offsetHeight &amp;gt;= raw.scrollHeight) { scope.$apply(attr.whenScrolled); } }); }; }); 控制器 $scope.loadMore = function() { if ($scope.currentPage &amp;lt; $scope.pages) { $scope.currentPage++; if ($scope.busy) { return false; } $scope.busy = true; $http.get('/api.php?r=site/list/page/'+$scope.currentPage+'/limit/'+$scope.limit).success(function(data) { $scope.busy = false; for (var i in data.data) { $scope.newses.push(data.data[i]); } $scope.pages = Math.ceil(data.total/$scope.limit); $rootScope.title = '首页 - 微文章'; }); } }; 视图 &lt;div when-scrolled="loadMore()"> //内容处理逻辑 &lt;/div></div></article><article><div class=blog-card><h3><a href=/2014/09/06/php-convert-date-to-constellation/>PHP将日期转换为星座</a></h3><p><small>September 6, 2014&nbsp;· 93 words&nbsp;· One minute</small><p>这几日在做的一个项目发现一个很有意思的东西，就是PHP将指定日期输出为星座
&lt;?php function constellation($month, $day) { if ($month &lt; 1 || $month > 12 || $day &lt; 1 || $day > 31) return false; $constellations = array( array("20" => '水瓶座'), array("19" => '双鱼座'), array("21" => '白羊座'), array("20" => '金牛座'), array("21" => '双子座'), array("22" => '巨蟹座'), array("23" => '狮子座'), array("23" => '处女座'), array("23" => '天秤座'), array("24" => '天蝎座'), array("22" => '射手座'), array("22" => '摩羯座') ); list($constellation_start, $constellation_name) = each($constellations[(int)$month - 1]); if ($day &lt; $constellation_start) list($constellation_start, $constellation_name) = each($constellations[($month - 2 &lt; 0) ?</div></article><article><div class=blog-card><h3><a href=/2014/09/06/ng-resource-get-started/>ngResource快速上手</a></h3><p><small>September 6, 2014&nbsp;· 48 words&nbsp;· One minute</small><p>废话不多说，本文的目的就是看过之后就会使用ngResource了。
引入angular-resource.min.js 定义模块时加载ngResource 定义service 完整代码如下
var app = angular.module('app', ["ngResource"]); app.factory('Phone', ['$resource', function($resource) { return $resource('user/:uid', { uid: '@uid' }, { update: { method: 'PUT' } }); }]); app.controller('MainCtrl', ['$scope', 'Phone', function($scope, Phone) { $scope.phones = Phone.query(); Phone.update({ uid: 1 }, { name: "zhangsan", age: "10" }); }]);</div></article><article><div class=blog-card><h3><a href=/2014/09/06/php-heredoc/>PHP heredoc 字符串定界符使用</a></h3><p><small>September 6, 2014&nbsp;· 15 words&nbsp;· One minute</small><p>PHP定义字符串有三种形式
双引号 单引号 heredoc定界符 前面两种大家都很熟悉了，第三种大家用的少。一般在输出大段HTML的时候很方便，不多说，上代码！
&lt;?php $link = 'https://www.google.com.hk'; print &lt;&lt;&lt;DOGS &lt;a href="{$link}"}Google&lt;/a> DOGS; DOGS可以自己定义。</div></article><article><div class=blog-card><h3><a href=/2014/09/06/jquery-write-a-plugin/>jquery插件写法</a></h3><p><small>September 6, 2014&nbsp;· 131 words&nbsp;· One minute</small><p>项目地址 http://xialeistudio.github.io/search/
jquery插件确实是数不胜数，只要你用心找，肯定能找得到!
但是一些小功能想自己写，找的话估计时间还长些，本文简单开发一个 基于jquery的获取url查询字符串的 小插件。
插件的模版（$.extend扩展jquery内置方法)
(function($) { $.x_search = function(_name,target) { //x_search是插件名字,_name、target是参数 }; })(jQuery); /** * $.x_search * @extends jquery 2.1.1(基于该版本开发，其他版本自测) * @fileOverview 获取url queryString * @author xialeistudio * @email 1065890063@qq.com * @site www.ddhigh.com * @version 0.0.1 * @date 2014-08-12 * @license MIT * @example * 获取当个Key * $.x_search('name'); * 获取所有 * $.x_search(); */ (function($) { $.x_search = function(_name,target) { if(typeof target == 'undefined'){ target = window.location.search; } if (typeof _name == 'undefined') { //所有 var query =target.</div></article></div><div class=paginator><a class=prev href=/page/30/>&larr;&nbsp;&nbsp;Pre Page</a>
<a class=next href=/page/32/>Next Page&nbsp;&nbsp;&rarr;</a></div></div></div></div><footer class=footer><p>&copy; 2014 - 2024 <a href=https://www.ddhigh.com/>Lei Xia</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.5376 22.7916C11.0152 22.7207 22.5795 21.1781 22.0978 10.4211 22.0536 9.43274 21.9303 8.53367 21.7387 7.71865M10.5376 22.7916C16.876 22.3728 20.0969 19.8899 21.5383 16.9142M10.5376 22.7916C9.7707 22.9055 8.97982 22.8964 8.19743 22.7725M21.7387 7.71865C21.4988 6.69828 21.1518 5.80967 20.7188 5.04257m1.0199 2.67608C22.6022 10.1105 23.0542 13.7848 21.5383 16.9142M20.7188 5.04257c-3.5504-6.28886-12.88753-4.410077-16.44303.0C2.88063 6.77451-.0433281 11.1668 1.38159 16.6571c.89322 3.4417 3.7911 5.6365 6.81584 6.1154M20.7188 5.04257c1.3509 1.89783 3.3111 6.34223 1.6353 10.37273M21.5383 16.9142C21.8737 16.4251 22.1428 15.9235 22.3541 15.4153M8.19743 22.7725C12.1971 23.4683 20.6281 22.971 22.3541 15.4153M14 10.945C13.3836 10.289 12.003 8.63215 11.2034 7.04814 11.1703 6.98257 11.0247 6.98456 10.9937 7.05061 10.5221 8.05496 9.07362 9.92941 8 10.945m3.0333-3.50056C10.9392 9.86549 11 15 12 17" stroke="currentcolor" stroke-linecap="round"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-EC3XLVSGKV"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EC3XLVSGKV")</script></main></body><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".blog-content img"));images.forEach(e=>{mediumZoom(e,{margin:10,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.5)"})})</script><script src=/main.min.6bb26b69159420159c74dc9e097b06a578ed2b68c701466a91a44a9632d851bd0af167a1b30012387b4c512b48ad9ad4d3394e04d77ae38d57e1920fe4ed34fe.js integrity="sha512-a7JraRWUIBWcdNyeCXsGpXjtK2jHAUZqkaRKljLYUb0K8WehswASOHtMUStIrZrU0zlOBNd6441X4ZIP5O00/g==" crossorigin=anonymous defer></script></html>