<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Learning &amp; Sharing</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Learning &amp; Sharing"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Learning &amp; Sharing"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Learning &amp;amp; Sharing"><meta property="og:type" content="website"><meta property="og:title" content="Learning &amp; Sharing"><meta property="og:url" content="https://www.ddhigh.com/"><meta property="og:site_name" content="Learning &amp; Sharing"><meta property="og:description" content="Learning &amp;amp; Sharing"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://www.ddhigh.com/img/og_image.png"><meta property="article:author" content="Xia Lei"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://www.ddhigh.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.ddhigh.com"},"headline":"Learning & Sharing","image":["https://www.ddhigh.com/img/og_image.png"],"author":{"@type":"Person","name":"Xia Lei"},"publisher":{"@type":"Organization","name":"Learning & Sharing","logo":{"@type":"ImageObject","url":{"text":"Learning & Sharing"}}},"description":"Learning &amp; Sharing"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.4.1/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?78141f99bbb49f1564a7af89344f5add";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Learning &amp; Sharing</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Suche" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-05-16T21:58:35.000Z" title="5/16/2015, 9:58:35 PM">2015-05-17</time></span><span class="level-item"><a class="link-muted" href="/categories/frontend/">frontend</a></span><span class="level-item">a minute lesen (Über 123 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/05/16/2015-05-17-svg-loading.html">svg制作loading</a></p><div class="content"><p>还在使用gif做loading效果吗？你确实out了，再不济也得用css3动画是不是–。无奈，css3旋转动画需要一张png图片来做，也没什么问题，现在，有更炫酷的方案了。<br>没错!就是SVG。svg其实不是什么新东西。SVG 于 2003 年 1 月 14 日成为 W3C 推荐标准。现在浏览器越来越强大，所以，尽情使用吧！   </p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 200px;height: 200px;background: #000000&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.1&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;100&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;100&quot;</span> <span class="attr">r</span>=<span class="string">&quot;50&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;rgba(255,255,255,0.2)&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M100 50 A50 50 0 0 1 150 100 &quot;</span> <span class="attr">style</span>=<span class="string">&quot;stroke: rgba(255,255,255,.7);stroke-width: 2&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">animateTransform</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">attributeName</span>=<span class="string">&quot;transform&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">fill</span>=<span class="string">&quot;freeze&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">attributeType</span>=<span class="string">&quot;XML&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">&quot;rotate&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">from</span>=<span class="string">&quot;0,100,100&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">to</span>=<span class="string">&quot;360,100,100&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">dur</span>=<span class="string">&quot;1s&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">repeatCount</span>=<span class="string">&quot;indefinite&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><div style="width: 200px;height: 200px;background: #000000">
  <svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <g>
      <circle cx="100" cy="100" r="50" fill="none" stroke-width="2" stroke="rgba(255,255,255,0.2)"/>
      <path d="M100 50 A50 50 0 0 1 150 100 " style="stroke: rgba(255,255,255,.7);stroke-width: 2"/>
      <animateTransform attributeName="transform" fill="freeze" attributeType="XML" type="rotate" from="0,100,100" to="360,100,100" dur="1s" repeatCount="indefinite"/>
    </g>
  </svg>
</div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-04-13T01:52:20.000Z" title="4/13/2015, 1:52:20 AM">2015-04-13</time></span><span class="level-item"><a class="link-muted" href="/categories/backend/">backend</a><span> / </span><a class="link-muted" href="/categories/backend/php/">php</a></span><span class="level-item">2 minutes lesen (Über 294 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/04/13/2015-04-13-php-filecache.html">php文件缓存类</a></p><div class="content"><p>缓存有很多方法，memcache,databse,file,redis等等，原理都差不多，简要介绍一下，写入缓存就不多说了，主要是读取缓存。</p>
<ol>
<li>检测指定key是否存在，如不存在则返回false。</li>
<li>检测指定key是否过期，如过期则返回false。</li>
<li>指定key存在且未过期，返回缓存值。</li>
</ol>
<p>本文介绍文件缓存的实现，其他类型可以参照实现。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> wechatPublicPlatform</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2015-4-13</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xialei &lt;xialeistudio<span class="doctag">@gmail</span>.com&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cache</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Exception</span>(<span class="string">&#x27;不可被实例化&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置缓存</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> int $expires 0为不过期</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params"><span class="variable">$key</span>, <span class="variable">$value</span>, <span class="variable">$expires</span> = <span class="number">0</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$cachePath</span> = <span class="keyword">__DIR__</span> . <span class="string">&#x27;/cache&#x27;</span>;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">is_dir</span>(<span class="variable">$cachePath</span>)) &#123;</span><br><span class="line">            <span class="title function_ invoke__">mkdir</span>(<span class="variable">$cachePath</span>, <span class="number">666</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$data</span> = [</span><br><span class="line">            <span class="string">&#x27;key&#x27;</span> =&gt; <span class="variable">$key</span>,</span><br><span class="line">            <span class="string">&#x27;value&#x27;</span> =&gt; <span class="variable">$value</span>,</span><br><span class="line">            <span class="string">&#x27;expires&#x27;</span> =&gt; <span class="variable">$expires</span></span><br><span class="line">        ];</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">file_put_contents</span>(<span class="variable">$cachePath</span> . <span class="string">&#x27;/&#x27;</span> . <span class="title function_ invoke__">md5</span>(<span class="variable">$key</span>), <span class="title function_ invoke__">json_encode</span>(<span class="variable">$data</span>, JSON_UNESCAPED_UNICODE));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取缓存</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"><span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$cacheFile</span> = <span class="keyword">__DIR__</span> . <span class="string">&#x27;/cache/&#x27;</span> . <span class="title function_ invoke__">md5</span>(<span class="variable">$key</span>);</span><br><span class="line">        <span class="comment">//检测是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">is_file</span>(<span class="variable">$cacheFile</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//检测是否过期</span></span><br><span class="line">        <span class="variable">$data</span> = <span class="title function_ invoke__">json_decode</span>(<span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$cacheFile</span>), <span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//获取最近修改时间</span></span><br><span class="line">        <span class="variable">$mtime</span> = <span class="title function_ invoke__">filemtime</span>(<span class="variable">$cacheFile</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">time</span>() &gt; <span class="variable">$mtime</span> + <span class="variable">$data</span>[<span class="string">&#x27;expires&#x27;</span>]) &#123;</span><br><span class="line">            <span class="title function_ invoke__">unlink</span>(<span class="variable">$cacheFile</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$data</span>[<span class="string">&#x27;value&#x27;</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除缓存</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> string $key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">delete</span>(<span class="params"><span class="variable">$key</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$cacheFile</span> = <span class="keyword">__DIR__</span> . <span class="string">&#x27;/cache/&#x27;</span> . <span class="title function_ invoke__">md5</span>(<span class="variable">$key</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">is_file</span>(<span class="variable">$cacheFile</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_ invoke__">unlink</span>(<span class="variable">$cacheFile</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-04-09T03:02:42.000Z" title="4/9/2015, 3:02:42 AM">2015-04-09</time></span><span class="level-item"><a class="link-muted" href="/categories/frontend/">frontend</a><span> / </span><a class="link-muted" href="/categories/frontend/angularjs/">angularjs</a></span><span class="level-item">5 minutes lesen (Über 696 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/04/09/2015-04-09-angularjs-upload-directive-with-progress.html">带进度条的angularjs上传指令</a></p><div class="content"><h2 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a>项目地址</h2><p><a target="_blank" rel="noopener" href="https://git.coding.net/xialei/xl-angular-upload.git">https://git.coding.net/xialei/xl-angular-upload.git</a></p>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2015/04/QQ%E6%88%AA%E5%9B%BE20150409190032-300x144.png" alt="图1"><br><img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2015/04/QQ%E6%88%AA%E5%9B%BE20150409190040-300x153.png" alt="图2"></p>
<h2 id="指令代码"><a href="#指令代码" class="headerlink" title="指令代码"></a>指令代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">angular.<span class="title function_">module</span>(<span class="string">&#x27;xl-angular-upload&#x27;</span>, [])</span><br><span class="line">    .<span class="title function_">directive</span>(<span class="string">&#x27;angularUpload&#x27;</span>, [<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">restrict</span>: <span class="string">&#x27;E&#x27;</span>,</span><br><span class="line">            <span class="attr">require</span>: <span class="string">&#x27;ngModel&#x27;</span>,</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;&lt;div class=&quot;xl-angular-upload&quot;&gt;\n    &lt;!--upload button--&gt;\n    &lt;button class=&quot;xl-btn btn-primary&quot;&gt;上传\n        &lt;input type=&quot;file&quot;/&gt;\n    &lt;/button&gt;\n    &lt;!--upload queue--&gt;\n    &lt;div class=&quot;queue&quot;&gt;\n        &lt;div class=&quot;item&quot; ng-repeat=&quot;item in queue&quot;&gt;\n            &lt;div class=&quot;info&quot;&gt;\n                &lt;div class=&quot;no&quot;&gt;&#123;&#123;$index+1&#125;&#125;&lt;/div&gt;\n                &lt;div class=&quot;name&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/div&gt;\n                &lt;div class=&quot;size&quot;&gt;&#123;&#123;(item.size/1024).toFixed(2)&#125;&#125;KB&lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;process-bar&quot;&gt;\n                &lt;div class=&quot;process&quot; style=&quot;width:&#123;&#123;item.process&#125;&#125;%&quot;&gt;&lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;&#x27;</span>,</span><br><span class="line">            <span class="attr">replace</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">link</span>: <span class="keyword">function</span> (<span class="params">scope, ele, attrs, ctrl</span>) &#123;</span><br><span class="line">                <span class="comment">//必要属性检测</span></span><br><span class="line">                <span class="keyword">if</span> (!attrs.<span class="property">action</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;请设置上传action&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//初始化</span></span><br><span class="line">                scope.<span class="property">queue</span> = [];</span><br><span class="line">                <span class="keyword">var</span> file = angular.<span class="title function_">element</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.xl-angular-upload&gt;.xl-btn&gt;input[type=&quot;file&quot;]&#x27;</span>));</span><br><span class="line">                <span class="keyword">var</span> files = [];</span><br><span class="line">                attrs.<span class="property">accept</span> &amp;&amp; file.<span class="title function_">attr</span>(<span class="string">&#x27;accept&#x27;</span>, attrs.<span class="property">accept</span>);</span><br><span class="line">                attrs.<span class="property">multiple</span> &amp;&amp; file.<span class="title function_">attr</span>(<span class="string">&#x27;multiple&#x27;</span>, attrs.<span class="property">multiple</span>);</span><br><span class="line">                file.<span class="title function_">bind</span>(<span class="string">&quot;change&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">                    scope.$apply(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                        scope.<span class="property">queue</span> = [];</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> e.<span class="property">target</span>.<span class="property">files</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (<span class="regexp">/^\d+$/</span>.<span class="title function_">test</span>(i)) &#123;</span><br><span class="line">                                e.<span class="property">target</span>.<span class="property">files</span>[i].<span class="property">process</span> = <span class="number">0</span>;</span><br><span class="line">                                scope.<span class="property">queue</span>.<span class="title function_">push</span>(e.<span class="property">target</span>.<span class="property">files</span>[i]);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="comment">//准备上传</span></span><br><span class="line">                    scope.<span class="property">queue</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> data = <span class="keyword">new</span> <span class="title class_">FormData</span>;</span><br><span class="line">                        data.<span class="title function_">append</span>(attrs.<span class="property">name</span> || <span class="string">&#x27;file&#x27;</span>, item);</span><br><span class="line">                        <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">                        xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, attrs.<span class="property">action</span>, <span class="literal">true</span>);</span><br><span class="line">                        <span class="comment">//事件监听</span></span><br><span class="line">                        xhr.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (xhr.<span class="property">readyState</span> == <span class="number">4</span> &amp;&amp; xhr.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">                                <span class="comment">//上传完成了</span></span><br><span class="line">                                <span class="keyword">var</span> resp = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>);</span><br><span class="line">                                <span class="keyword">if</span> (resp.<span class="property">error</span>) &#123;</span><br><span class="line">                                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(resp.<span class="property">error</span>);</span><br><span class="line">                                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                    files.<span class="title function_">push</span>(resp);</span><br><span class="line">                                    ctrl.$setViewValue(files);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;;</span><br><span class="line">                        xhr.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">                            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(error);</span><br><span class="line">                        &#125;;</span><br><span class="line">                        xhr.<span class="property">upload</span> &amp;&amp; (xhr.<span class="property">upload</span>.<span class="property">onprogress</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (e.<span class="property">lengthComputable</span>) &#123;</span><br><span class="line">                                scope.$apply(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                                    item.<span class="property">process</span> = <span class="built_in">parseInt</span>((e.<span class="property">loaded</span> / e.<span class="property">total</span>) * <span class="number">100</span>);</span><br><span class="line">                                &#125;);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                        xhr.<span class="title function_">send</span>(data);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]);</span><br></pre></td></tr></table></figure>

<h2 id="HTML代码"><a href="#HTML代码" class="headerlink" title="HTML代码"></a>HTML代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>AngularToggle<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;angular-upload.css&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        * &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: Consolas, <span class="string">&quot;Microsoft Yahei&quot;</span>, arial, sans-serif;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-controller</span>=<span class="string">&quot;MainCtrl&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 400px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">angular-upload</span> <span class="attr">action</span>=<span class="string">&quot;upload.php&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">accept</span>=<span class="string">&quot;image/*&quot;</span> <span class="attr">multiple</span>=<span class="string">&quot;true&quot;</span> <span class="attr">ng-model</span>=<span class="string">&quot;files&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://cdn.bootcss.com/angular.js/1.3.15/angular.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;angular-upload.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="string">&quot;use strict&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        angular.<span class="title function_">module</span>(<span class="string">&#x27;app&#x27;</span>, [</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;xl-angular-upload&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        ]).<span class="title function_">controller</span>(<span class="string">&#x27;MainCtrl&#x27;</span>, [<span class="string">&#x27;$scope&#x27;</span>, <span class="keyword">function</span> (<span class="params">$scope</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            $scope.$watch(<span class="string">&#x27;files&#x27;</span>, <span class="keyword">function</span> (<span class="params">n, o</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;]);</span></span><br><span class="line"><span class="language-javascript">    &#125;)();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="CSS代码"><a href="#CSS代码" class="headerlink" title="CSS代码"></a>CSS代码</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.xl-btn</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#EEE</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#EEE</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">300</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Consolas&quot;</span>, <span class="string">&quot;Microsoft YaHei&quot;</span>, Arial, arial, sans-serif;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  appearance: none;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">  -webkit-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  -moz-<span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  -webkit-<span class="attribute">transition-property</span>: all;</span><br><span class="line">  <span class="attribute">transition-property</span>: all;</span><br><span class="line">  -webkit-<span class="attribute">transition-duration</span>: .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">transition-duration</span>: .<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  -webkit-<span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  -moz-<span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.xl-btn</span><span class="selector-class">.btn-primary</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#7B72E9</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#7B72E9</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#FFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.xl-btn</span><span class="selector-class">.btn-primary</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#a49ef0</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#a49ef0</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#FFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.xl-btn</span> <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;file&quot;</span>]</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.queue</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.queue</span> <span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.queue</span> <span class="selector-class">.item</span> &gt; <span class="selector-class">.info</span> <span class="selector-class">.no</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.queue</span> <span class="selector-class">.item</span> &gt; <span class="selector-class">.info</span> <span class="selector-class">.name</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">70%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.queue</span> <span class="selector-class">.item</span> &gt; <span class="selector-class">.info</span> <span class="selector-class">.size</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: right;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.queue</span> <span class="selector-class">.item</span> &gt; <span class="selector-class">.info</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.queue</span> <span class="selector-class">.item</span> &gt; <span class="selector-class">.process-bar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xl-angular-upload</span> <span class="selector-class">.queue</span> <span class="selector-class">.item</span> &gt; <span class="selector-class">.process-bar</span> <span class="selector-class">.process</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">2s</span>;</span><br><span class="line">  -webkit-<span class="attribute">transition</span>: all .<span class="number">2s</span>;</span><br><span class="line">  -moz-<span class="attribute">transition</span>: all .<span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#7B72E9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>本指令的难点在于进度条的更新及ngModel数据的双向绑定，其实，只要在指令中require”ngModel”之后，利用$setViewValue方法和$render方法就可以了。而进度条的处理是由于双向绑定中列表的每个元素都是一个单独的对象，更新该对象的值不会影响其他上传，即每个上传都是单独的进度条。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-04-06T07:22:59.000Z" title="4/6/2015, 7:22:59 AM">2015-04-06</time></span><span class="level-item"><a class="link-muted" href="/categories/frontend/">frontend</a><span> / </span><a class="link-muted" href="/categories/frontend/angularjs/">angularjs</a></span><span class="level-item">2 minutes lesen (Über 289 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/04/06/2015-04-06-angularjs-q.html">在AngularJS中使用$q进行“同步”编程</a></p><div class="content"><p>今天群里有位朋友问到直接返回$http说读不到数据，原因在于$http是异步请求，而且是“不可期”的，你不知道什么时候这个请求完成了。</p>
<p>而对于这种需要“同步”编程的方式，AngularJS提供了一个内置Service $q，它提供了一种承诺&#x2F;延后（promise&#x2F;deferred），可以保证我们的调用代码一定能够拿到数据。所以我们用起来可以像同步调用一样，话说回来，最终还是xhr异步请求。</p>
<h2 id="Factory"><a href="#Factory" class="headerlink" title="Factory"></a>Factory</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">factory</span>(<span class="string">&#x27;itemService&#x27;</span>, [<span class="string">&#x27;$http&#x27;</span>, <span class="string">&#x27;$q&#x27;</span>, <span class="keyword">function</span> (<span class="params">$http, $q</span>) &#123;  </span><br><span class="line">  <span class="keyword">return</span> &#123;  </span><br><span class="line">    query : <span class="keyword">function</span>(<span class="params"></span>) &#123;  </span><br><span class="line">      <span class="keyword">var</span> deferred = $q.<span class="title function_">defer</span>();<span class="comment">//声明承诺</span></span><br><span class="line">      $http(&#123;<span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">url</span>: <span class="string">&#x27;/item/list&#x27;</span>&#125;).  </span><br><span class="line">      <span class="title function_">success</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;  </span><br><span class="line">        deferred.<span class="title function_">resolve</span>(data);<span class="comment">//请求成功</span></span><br><span class="line">      &#125;).  </span><br><span class="line">      <span class="title function_">error</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;  </span><br><span class="line">        deferred.<span class="title function_">reject</span>(data); <span class="comment">//请求失败</span></span><br><span class="line">      &#125;);  </span><br><span class="line">      <span class="keyword">return</span> deferred.<span class="property">promise</span>;   <span class="comment">// 返回承诺，这里返回的不是数据，而是API</span></span><br><span class="line">    &#125; </span><br><span class="line">  &#125;;  </span><br><span class="line">&#125;]);  </span><br></pre></td></tr></table></figure>

<h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">angular.<span class="title function_">module</span>(<span class="string">&#x27;app&#x27;</span>)  </span><br><span class="line">  .<span class="title function_">controller</span>(<span class="string">&#x27;MainCtrl&#x27;</span>, [<span class="string">&#x27;itemService&#x27;</span>,<span class="string">&#x27;$scope&#x27;</span>, <span class="keyword">function</span> (<span class="params">itemService,$scope</span>) &#123; <span class="comment">// 注入itemService</span></span><br><span class="line">    <span class="keyword">var</span> promise = itemService.<span class="title function_">query</span>(); <span class="comment">//获得承诺接口  </span></span><br><span class="line">    promise.<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;  <span class="comment">// 成功回调</span></span><br><span class="line">        $scope.<span class="property">user</span> = data;  </span><br><span class="line">    &#125;, <span class="keyword">function</span>(<span class="params">data</span>) &#123;  <span class="comment">// 错误回调</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求失败&#x27;</span>);</span><br><span class="line">    &#125;);  </span><br><span class="line">  &#125;]);  </span><br></pre></td></tr></table></figure>

<h2 id="文档地址"><a href="#文档地址" class="headerlink" title="文档地址"></a>文档地址</h2><p><a target="_blank" rel="noopener" href="http://docs.angularjs.org/api/ng.$q">http://docs.angularjs.org/api/ng.$q</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-04-06T02:04:48.000Z" title="4/6/2015, 2:04:48 AM">2015-04-06</time></span><span class="level-item"><a class="link-muted" href="/categories/frontend/">frontend</a><span> / </span><a class="link-muted" href="/categories/frontend/angularjs/">angularjs</a></span><span class="level-item">a minute lesen (Über 120 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/04/06/2015-04-06-angularjs-hello-world.html">angularjs Hello World</a></p><div class="content"><p>几乎所有的编程入门都是以”Hello World”开始的，这里也不例外。</p>
<h2 id="HTML代码"><a href="#HTML代码" class="headerlink" title="HTML代码"></a>HTML代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用ng-app指令“告诉”ng从哪里开始编译--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World - Angularjs<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vendor/angularjs/angular.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ng-model</span>=<span class="string">&quot;message&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;说点什么&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="JS代码"><a href="#JS代码" class="headerlink" title="JS代码"></a>JS代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xialei &lt;xialeistudio<span class="doctag">@gmail</span>.com&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> app = angular.<span class="title function_">module</span>(<span class="string">&#x27;app&#x27;</span>,[</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<p>双向绑定为ng内置，所以这里的js，实际上只有一个app定义罢了。<br>在输入框中输入任何字符都会及时在其之前的p元素显示出来。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-04-06T01:48:32.000Z" title="4/6/2015, 1:48:32 AM">2015-04-06</time></span><span class="level-item"><a class="link-muted" href="/categories/frontend/">frontend</a><span> / </span><a class="link-muted" href="/categories/frontend/angularjs/">angularjs</a></span><span class="level-item">2 minutes lesen (Über 271 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/04/06/2015-04-06-angularjs-concept%20to%20explain.html">Angularjs概念解释</a></p><div class="content"><ul>
<li>本文所有内容仅代表个人观点</li>
</ul>
<h2 id="ng"><a href="#ng" class="headerlink" title="ng"></a>ng</h2><p><em>Angularjs的简称。</em></p>
<h2 id="指令-Directive"><a href="#指令-Directive" class="headerlink" title="指令(Directive)"></a>指令(Directive)</h2><p><em>特殊的html标签或html属性，扩展了html的功能</em>。有以下几类：</p>
<ul>
<li>E    Element 元素 如 <dropdown /> 就是一个自定义指令（如何自定义指令，将在后面的文章中介绍），名称为”dropdown”。</li>
<li>A    Attribute 属性 如 <html ng-app="app"></html> 这是最常用的指令了，ng-app为指令名称，也是html元素的属性，app为该属性的值</li>
</ul>
<h2 id="作用域-scope"><a href="#作用域-scope" class="headerlink" title="作用域(scope)"></a>作用域(scope)</h2><p><em>ng中变量、方法都是基于作用域的，作用类似于js作用域。</em></p>
<h2 id="ng-bind"><a href="#ng-bind" class="headerlink" title="ng-bind"></a>ng-bind</h2><p><em>html输出js变量，跟作用域绑定，message为作用域中的一个变量。</em>示例代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-bind</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>最终会显示同一scope下的message变量值。</p>
<h2 id="ng-model"><a href="#ng-model" class="headerlink" title="ng-model"></a>ng-model</h2><p><em>双向绑定指令</em>，示例代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ng-model</span>=<span class="string">&quot;message&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>表明将input的值与作用域中的message变量进行绑定，当input值改变的时候，变量message跟着改变，html中输出的内容也会同步改变。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-03-16T01:43:07.000Z" title="3/16/2015, 1:43:07 AM">2015-03-16</time></span><span class="level-item"><a class="link-muted" href="/categories/frontend/">frontend</a></span><span class="level-item">2 minutes lesen (Über 342 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/03/16/2015-03-16-gulp-workflow.html">使用gulp来构建你的前端自动化工作流</a></p><div class="content"><p>之前用的Grunt，不过有时候Grunt确实用起来不爽，进来找到一款叫gulp.js的前端构建工具，当然，也是基于node.js的。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp --save-dev</span><br><span class="line">npm install del gulp-concat gulp-cssmin gulp-uglify --save-dev</span><br></pre></td></tr></table></figure>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>配置gulpfile.js，如果工作目录下没有该文件，请新建gulpfile.js，以下为一个常用的参考代码:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xialei &lt;xialeistudio<span class="doctag">@gmail</span>.com&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&quot;use strict&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加载插件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@type</span> &#123;<span class="type">exports</span>&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> del = <span class="built_in">require</span>(<span class="string">&#x27;del&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> cssmin = <span class="built_in">require</span>(<span class="string">&#x27;gulp-cssmin&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> concat = <span class="built_in">require</span>(<span class="string">&#x27;gulp-concat&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&#x27;gulp-uglify&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 清空目录的命令</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    gulp.<span class="title function_">task</span>(<span class="string">&#x27;clean&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">del</span>([<span class="string">&#x27;build&#x27;</span>]);</span><br><span class="line">    &#125;);</span><br><span class="line">    gulp.<span class="title function_">task</span>(<span class="string">&#x27;css&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 加载源代码</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> gulp.<span class="title function_">src</span>([</span><br><span class="line">            <span class="string">&#x27;bower_components/bootstrap/dist/css/bootstrap.min.css&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;bower_components/font-awesome/css/font-awesome.min.css&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;css/style.css&#x27;</span></span><br><span class="line">        ])</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 压缩css</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">            .<span class="title function_">pipe</span>(<span class="title function_">cssmin</span>())</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 连接压缩后的css</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">            .<span class="title function_">pipe</span>(<span class="title function_">concat</span>(<span class="string">&#x27;style.css&#x27;</span>))</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 输出到目标目录</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">            .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;build/css&#x27;</span>))</span><br><span class="line">    &#125;);</span><br><span class="line">    gulp.<span class="title function_">task</span>(<span class="string">&#x27;js&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> gulp.<span class="title function_">src</span>([</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 加载源代码</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">            <span class="string">&#x27;bower_components/angular/angular.min.js&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;bower_components/angular-sanitize/angular-sanitize.min.js&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;js/main.js&#x27;</span>])</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 压缩Js</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">            .<span class="title function_">pipe</span>(<span class="title function_">uglify</span>())</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 合并js</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">            .<span class="title function_">pipe</span>(<span class="title function_">concat</span>(<span class="string">&#x27;main.js&#x27;</span>))</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 输出到目标目录</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">            .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;build/js&#x27;</span>))</span><br><span class="line">    &#125;);</span><br><span class="line">    gulp.<span class="title function_">task</span>(<span class="string">&#x27;img&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 加载源文件</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">return</span> gulp.<span class="title function_">src</span>([</span><br><span class="line">            <span class="string">&#x27;img/*.*&#x27;</span></span><br><span class="line">        ])</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 输出到目标目录</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">            .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;build/img&#x27;</span>));</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义默认任务，此任务依赖于 clean,img,css,js，所以在执行</span></span><br><span class="line"><span class="comment">     * 本任务时会按顺序先执行依赖任务</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, [<span class="string">&#x27;clean&#x27;</span>, <span class="string">&#x27;img&#x27;</span>, <span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;js&#x27;</span>]);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h2 id="执行编译"><a href="#执行编译" class="headerlink" title="执行编译"></a>执行编译</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-03-06T19:41:30.000Z" title="3/6/2015, 7:41:30 PM">2015-03-07</time></span><span class="level-item"><a class="link-muted" href="/categories/backend/">backend</a><span> / </span><a class="link-muted" href="/categories/backend/php/">php</a></span><span class="level-item">a minute lesen (Über 144 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/03/06/2015-03-07-phpexcel-a-lot-of-column.html">PHPExcel导出时列过大的解决方案</a></p><div class="content"><p>今天导出Excel的时候，列不是固定的，而且有差不多几十个，横轴由’A’变为了’AA’，给导出时增加了难度，因为要去算列名称，不过换个方式想一下，发现是很有规律的26进制数。 发现秘诀后就好办了，发一个10进制转26进制的方法。</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">numberToStr26</span>(<span class="params"><span class="variable">$n</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$s</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="variable">$n</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="variable">$m</span> = <span class="variable">$n</span> % <span class="number">26</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$m</span> == <span class="number">0</span>) <span class="variable">$m</span> = <span class="number">26</span>;</span><br><span class="line">        <span class="variable">$s</span> = <span class="title function_ invoke__">chr</span>(<span class="variable">$m</span> + <span class="number">64</span>) . <span class="variable">$s</span>;</span><br><span class="line">        <span class="variable">$n</span> = (<span class="variable">$n</span> - <span class="variable">$m</span>) / <span class="number">26</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2015/03/QQ%E6%88%AA%E5%9B%BE20150307113935.png" alt="效果图"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-03-06T01:08:26.000Z" title="3/6/2015, 1:08:26 AM">2015-03-06</time></span><span class="level-item"><a class="link-muted" href="/categories/backend/">backend</a><span> / </span><a class="link-muted" href="/categories/backend/php/">php</a></span><span class="level-item">a minute lesen (Über 119 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/03/06/2015-03-06-wechat-reply-messy-code.html">微信公众平台回复乱码问题</a></p><div class="content"><p>很多微信公众平台的自动回复程序都是 ThinkWechat.class.php 这个类开发的，今天碰到一个莫名其妙的乱码问题，查问题发现是GB2312编码导致，所以要修改源码。</p>
<p>先增加一个方法:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 检测是否UTF-8</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $str</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> bool</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">is_utf8</span>(<span class="params"><span class="variable">$str</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;//u&#x27;</span>, <span class="variable">$str</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>找到</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">$this</span>-&gt;data [<span class="string">&#x27;Content&#x27;</span>] = <span class="variable">$content</span>;</span><br></pre></td></tr></table></figure>

<p>修改为</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">is_utf8</span>(<span class="variable">$content</span>)) &#123;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;data [<span class="string">&#x27;Content&#x27;</span>] = <span class="variable">$content</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;data [<span class="string">&#x27;Content&#x27;</span>] = <span class="title function_ invoke__">iconv</span>(<span class="string">&#x27;gb2312&#x27;</span>, <span class="string">&#x27;UTF-8//IGNORE&#x27;</span>, <span class="variable">$content</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Gepostet vor&nbsp;<time dateTime="2015-02-05T03:20:43.000Z" title="2/5/2015, 3:20:43 AM">2015-02-05</time></span><span class="level-item"><a class="link-muted" href="/categories/frontend/">frontend</a><span> / </span><a class="link-muted" href="/categories/frontend/angularjs/">angularjs</a></span><span class="level-item">3 minutes lesen (Über 490 Wörter)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/02/05/2015-02-05-angularjs-ueditor-directive.html">angularjs ueditor指令</a></p><div class="content"><p>一直以来，angularjs的富文本编辑器都比较难做，主要是第三方的编辑器很难集成进来，今天花时间研究了一下，发现ueditor主要加载两个js文件</p>
<ul>
<li>ueditor.config.js</li>
<li>ueditor.all.js</li>
</ul>
<p>能不能把这两个文件异步加载呢？答案是肯定的。我们新建一个服务用来异步加载资源，并设置必要的回调方法。</p>
<h2 id="Factory"><a href="#Factory" class="headerlink" title="Factory"></a>Factory</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">services.<span class="title function_">factory</span>(<span class="string">&#x27;Common&#x27;</span>, [<span class="string">&#x27;$http&#x27;</span>, <span class="string">&#x27;$q&#x27;</span>,</span><br><span class="line"><span class="keyword">function</span>(<span class="params">$http, $q</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">loadScript</span>: <span class="keyword">function</span>(<span class="params">url, callback</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> head = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;head&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">            script.<span class="title function_">setAttribute</span>(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;text/javascript&quot;</span>);</span><br><span class="line">            script.<span class="title function_">setAttribute</span>(<span class="string">&quot;src&quot;</span>, url);</span><br><span class="line">            script.<span class="title function_">setAttribute</span>(<span class="string">&quot;async&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">            script.<span class="title function_">setAttribute</span>(<span class="string">&quot;defer&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">            head.<span class="title function_">appendChild</span>(script);</span><br><span class="line">            <span class="comment">//fuck ie! duck type</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">all</span>) &#123;</span><br><span class="line">                script.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> state = <span class="variable language_">this</span>.<span class="property">readyState</span>;</span><br><span class="line">                    <span class="keyword">if</span> (state === <span class="string">&#x27;loaded&#x27;</span> || state === <span class="string">&#x27;complete&#x27;</span>) &#123;</span><br><span class="line">                        callback &amp;&amp; <span class="title function_">callback</span>();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//firefox, chrome</span></span><br><span class="line">                script.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    callback &amp;&amp; <span class="title function_">callback</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">loadCss</span>: <span class="keyword">function</span>(<span class="params">url</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> ele = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;link&#x27;</span>);</span><br><span class="line">            ele.<span class="property">href</span> = url;</span><br><span class="line">            ele.<span class="property">rel</span> = <span class="string">&#x27;stylesheet&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (ele.<span class="property">onload</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">                ele.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ele.<span class="property">onreadystatechange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            angular.<span class="title function_">element</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>)).<span class="title function_">prepend</span>(ele);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>

<p>通过绑定callback到 onload 事件来实现回调。</p>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">directives.<span class="title function_">directive</span>(<span class="string">&#x27;ueditor&#x27;</span>, [<span class="string">&#x27;Common&#x27;</span>, <span class="string">&#x27;$rootScope&#x27;</span>,</span><br><span class="line"><span class="keyword">function</span>(<span class="params">Common, $rootScope</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">restrict</span>: <span class="string">&#x27;EA&#x27;</span>,</span><br><span class="line">        <span class="attr">require</span>: <span class="string">&#x27;ngModel&#x27;</span>,</span><br><span class="line">        <span class="attr">link</span>: <span class="keyword">function</span>(<span class="params">scope, ele, attrs, ctrl</span>) &#123;</span><br><span class="line">            $rootScope.$emit(<span class="string">&#x27;loading&#x27;</span>, <span class="string">&#x27;初始化编辑器...&#x27;</span>); <span class="comment">//广播loading事件，可以删除</span></span><br><span class="line">            <span class="keyword">var</span> _self = <span class="variable language_">this</span>,</span><br><span class="line">            _initContent, editor, editorReady = <span class="literal">false</span>,</span><br><span class="line">            base = <span class="string">&#x27;/public/vendor/utf8_qiniu_ueditor-master&#x27;</span>,</span><br><span class="line">            <span class="comment">//ueditor目录</span></span><br><span class="line">            _id = attrs.<span class="property">ueditor</span>;</span><br><span class="line">            <span class="keyword">var</span> editorHandler = &#123;</span><br><span class="line">                <span class="attr">init</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="variable language_">window</span>.<span class="property">UEDITOR_HOME_URL</span> = base + <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line">                    <span class="keyword">var</span> _self = <span class="variable language_">this</span>;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable constant_">UE</span> != <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">                        editor = <span class="variable constant_">UE</span>.<span class="title function_">getEditor</span>(_id, &#123;</span><br><span class="line">                            <span class="attr">toolbars</span>: [[<span class="string">&#x27;fontsize&#x27;</span>, <span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;blockquote&#x27;</span>, <span class="string">&#x27;horizontal&#x27;</span>, <span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;removeformat&#x27;</span>, <span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;insertimage&#x27;</span>, <span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;bold&#x27;</span>, <span class="string">&#x27;italic&#x27;</span>, <span class="string">&#x27;underline&#x27;</span>, <span class="string">&#x27;forecolor&#x27;</span>, <span class="string">&#x27;backcolor&#x27;</span>, <span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;justifyleft&#x27;</span>, <span class="string">&#x27;justifycenter&#x27;</span>, <span class="string">&#x27;justifyright&#x27;</span>, <span class="string">&#x27;justifyjustify&#x27;</span>, <span class="string">&#x27;rowspacingtop&#x27;</span>, <span class="string">&#x27;rowspacingbottom&#x27;</span>, <span class="string">&#x27;lineheight&#x27;</span>, <span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;insertorderedlist&#x27;</span>, <span class="string">&#x27;insertunorderedlist&#x27;</span>, <span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;link&#x27;</span>, <span class="string">&#x27;unlink&#x27;</span>, <span class="string">&#x27;|&#x27;</span>, <span class="string">&#x27;emotion&#x27;</span>]]</span><br><span class="line">                        &#125;);</span><br><span class="line">                        editor.<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                            editor.<span class="title function_">setHeight</span>(<span class="number">500</span>);</span><br><span class="line">                            editorReady = <span class="literal">true</span>;</span><br><span class="line">                            $rootScope.$emit(<span class="string">&#x27;loading&#x27;</span>, <span class="string">&#x27;&#x27;</span>); <span class="comment">//编辑器初始化完成</span></span><br><span class="line">                            editor.<span class="title function_">addListener</span>(<span class="string">&#x27;contentChange&#x27;</span>,</span><br><span class="line">                            <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">//双向绑定</span></span><br><span class="line">                                <span class="keyword">if</span> (!scope.<span class="property">$$phase</span>) &#123;</span><br><span class="line">                                    scope.$apply(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                                        ctrl.$setViewValue(editor.<span class="title function_">getContent</span>());</span><br><span class="line">                                    &#125;);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title class_">Common</span>.<span class="title function_">loadScript</span>(base + <span class="string">&#x27;/ueditor.config.js&#x27;</span>, <span class="literal">null</span>);</span><br><span class="line">                        <span class="title class_">Common</span>.<span class="title function_">loadScript</span>(base + <span class="string">&#x27;/ueditor.all.min.js&#x27;</span>,</span><br><span class="line">                        <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                            _self.<span class="title function_">init</span>();</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">setContent</span>: <span class="keyword">function</span>(<span class="params">content</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (editor &amp;&amp; editorReady) &#123;</span><br><span class="line">                        editor.<span class="title function_">setContent</span>(content);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            ctrl.<span class="property">$render</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                _initContent = ctrl.$isEmpty(ctrl.<span class="property">$viewValue</span>) ? <span class="string">&#x27;&#x27;</span>: ctrl.<span class="property">$viewValue</span>;</span><br><span class="line">                editorHandler.<span class="title function_">setContent</span>(_initContent); <span class="comment">//双向绑定</span></span><br><span class="line">            &#125;;</span><br><span class="line">            editorHandler.<span class="title function_">init</span>();</span><br><span class="line">            <span class="comment">//事件</span></span><br><span class="line">            $rootScope.$on(<span class="string">&#x27;$routeChangeStart&#x27;</span>,</span><br><span class="line">            <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                editor &amp;&amp; editor.<span class="title function_">destroy</span>();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>

<p>由于angularjs无法自动获得编辑器内容，只能手动监听 contentChange事件来实现双向绑定。</p>
<h2 id="模板代码"><a href="#模板代码" class="headerlink" title="模板代码"></a>模板代码</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ueditor</span>=<span class="string">&quot;editor&quot;</span> <span class="attr">ng-required</span>=<span class="string">&quot;true&quot;</span> <span class="attr">ng-model</span>=<span class="string">&quot;material.content.content&quot;</span> <span class="attr">id</span>=<span class="string">&quot;editor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="https://og5r5kasb.qnssl.com/wp-content/uploads/2015/02/QQ%E6%88%AA%E5%9B%BE20150205191752.png" alt="效果图"></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/23/">Zurück</a></div><div class="pagination-next"><a href="/page/25/">Weiter</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/23/">23</a></li><li><a class="pagination-link is-current" href="/page/24/">24</a></li><li><a class="pagination-link" href="/page/25/">25</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/31/">31</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://static.ddhigh.com/blog/2019-09-18-094336.jpg" alt="XiaLei"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">XiaLei</p><p class="is-size-6 is-block">Senior Software Engineer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Tencent</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Seiten</p><a href="/archives"><p class="title">306</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Kategorien</p><a href="/categories"><p class="title">25</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">38</p></a></div></div></nav><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/xialeistudio"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="LinkedIn" href="https://www.linkedin.com/in/xialeidoc/"><i class="fa-brands fa-linkedin"></i></a></div></div></div><!--!--></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Learning &amp; Sharing</a><p class="is-size-7"><span>&copy; 2023 Xia Lei</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en-us");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="Zurück nach oben" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "Diese Website verwendet Cookies, um Ihre Erfahrung zu verbessern.",
          dismiss: "Verstanden!",
          allow: "Cookies zulassen",
          deny: "Ablehnen",
          link: "Mehr erfahren",
          policy: "Cookie-Richtlinie",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Tippen Sie etwas..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Tippen Sie etwas...","untitled":"(Ohne Titel)","posts":"Seiten","pages":"Pages","categories":"Kategorien","tags":"Tags"});
        });</script></body></html>